<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm

  The following page was cached by Bing Bot (https://bing.com/) on 23-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - [Mod] Mapgen framework/example [0.2.0] [noise23]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - [Mod] Mapgen framework/example [0.2.0] [noise23]" href="https://forum.minetest.net/feed.php?f=11&amp;t=8628" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=11">Mod Releases</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=8628">[Mod] Mapgen framework/example [0.2.0] [noise23]</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			24 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p130661" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p130661">[Mod] Mapgen framework/example [0.2.0] [noise23]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Fri Feb 21, 2014 9:40 am </p>

			<div class="content"><img src="http://i.imgur.com/YKS2iIk.png" alt="Image" /><br /><br /><br />Download and rename to noise23 <a href="https://github.com/paramat/noise23/archive/master.zip" class="postlink">https://github.com/paramat/noise23/archive/master.zip</a><br />Browse code <a href="https://github.com/paramat/noise23" class="postlink">https://github.com/paramat/noise23</a><br /><br />noise23 0.2.0 by paramat<br />For Minetest 0.4.11 and later<br />Depends default<br />License: code WTFPL<br /><br />Minetest 0.4.11 rewrite with the new noise features and all the corrections and optimisations i recently learned from hmmmm.<br />Now 3 simple biomes: grassland, desert and tundra.<br />16 nodes of perlinmap overgeneration to minimise mapchunk border glitches.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p130672" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p130672"></a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Fri Feb 21, 2014 12:24 pm </p>

			<div class="content">Bugfix, duh ...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138568" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138568">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>4aiman</strong> &raquo; Sun Apr 20, 2014 9:41 am </p>

			<div class="content">Amazing :)<br /><br />Hey, paramat, would it be hard to create a pure lua mapgen that would behave like mapgen_v7 in terms of API?<br /><br />What I mean here is ability to use functions like lua_mapgen.register_biome(...) that would work similar to minetest.register_biome. <br /><br />Regards!</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>4aiman</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1208</dd><dd><strong>Joined:</strong> Mon Jul 30, 2012 5:47 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138669" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138669">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Mon Apr 21, 2014 12:56 am </p>

			<div class="content">Hi, yeah hard for me but totally possible, although it doesn't interest me much at the moment.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138814" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138814">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>4aiman</strong> &raquo; Tue Apr 22, 2014 8:16 am </p>

			<div class="content">Oh, don't worry, I was curious - that's all. Currently I've fixed my issues with MGv7 by delaying LVM's stuff.<br /><br />PS: too bad we stil unable to like someone's posts...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>4aiman</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1208</dd><dd><strong>Joined:</strong> Mon Jul 30, 2012 5:47 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138854" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138854">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Tue Apr 22, 2014 11:16 am </p>

			<div class="content">Yep MGV7 is the one to use for lua API, there's not much point in me trying to compete with it :)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138937" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138937">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>4aiman</strong> &raquo; Wed Apr 23, 2014 8:20 am </p>

			<div class="content">It's not about competition :)<br />Should the api be more specific I wouldn't have to think for any other possibility.<br />I was so frustrated when saw that any function that adds ores or creates terrains runs <span style="font-weight: bold">prior</span> to creating caves and tunnels. So even if I wanted to split realms with &quot;undiggable&quot; nodes I couldn't. It took me some time to realize that such behavior is not the part of some mod.<br /><br />But in the end, minetest.after() did the trick for me. It's good that LVM could be used anytime I want. I even fixed /spawn command to search for a surface using LVM :)<br />Too bad I still can't figure out how many nodes can be loaded and processed simultaneously...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>4aiman</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1208</dd><dd><strong>Joined:</strong> Mon Jul 30, 2012 5:47 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p138972" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p138972">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Wed Apr 23, 2014 2:21 pm </p>

			<div class="content">You can actually stop caves removing particular nodes (in MGV6 and MGV7) by adding:<br />is _ground_content = false<br />to the node definition (meaning 'this node is not part of the ground so shouldn't be removed by cavegen) this was a change i requested.<br />Because lua is slow i have to keep my mods and mapgens (relatively) simple for a reasonable speed, if i wrote a mapgen with a biome API that out-performed MGV7 it would be too slow for most people.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p139005" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p139005">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>4aiman</strong> &raquo; Wed Apr 23, 2014 7:02 pm </p>

			<div class="content"><blockquote><div><cite>paramat wrote:</cite>You can actually stop caves removing particular nodes (in MGV6 and MGV7) by adding:<br />is _ground_content = false</div></blockquote><br />Thanks! Guess I have to update my local lua_api.txt :)<br /><br /><blockquote><div><cite>paramat wrote:</cite>If i wrote a mapgen with a biome API that out-performed MGV7 it would be too slow for most people.</div></blockquote><br />True...<br /><br />I've tried to tamper with LVM but have a lot of questions...<br />Could you help me? <br />For example, I wanted to make your realm be lower than it was. I've changed YMIN and YMAX to 700 but I got nothing at Y=700 within a square kilometer. I've reset map but got nothing again. Restored those values back to near 7000 and got a realm at Y~=7000. <br /><br />Or, if I want to change one of your biomes to smth different, then I need to change <dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>data&#91;vi&#93; = c_n23destone </code></dd></dl> to a different content_id? What about filler? <br />I mean the top node should differ from the beneath ones - how can I make that?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>4aiman</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1208</dd><dd><strong>Joined:</strong> Mon Jul 30, 2012 5:47 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p139012" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p139012">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Wed Apr 23, 2014 9:00 pm </p>

			<div class="content">YMIN and YMAX need to differ by at least 80-160 nodes for anything to generate, YMIN is the realm base and YMAX is the top of the atmosphere and where mountains will get chopped off. TERCEN and YWATER then should be inbetween those 2 values.<br />To change nodes for example:<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>local c_sandstone = minetest.get_content_id(&quot;default:sandstone&quot;)</code></dd></dl><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>data&#91;vi&#93; = c_sandstone</code></dd></dl><br />This mod doesn't do filler and surface material but can do so easily using 'density' to define layers of material underground, this is the advantage of 3D noise mapgen compared to the mostly 2D noise mapgen of MGV6 and MGV7, MGV5 was 3D noise but 3D noise was much slower back then, which is why MGV6 uses 2D noise.<br /><br />I think the 'is ground content' feature is not yet documented in the lua-api.txt, that needs to be done.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p139018" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p139018">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Thu Apr 24, 2014 12:04 am </p>

			<div class="content">To make biome 2 dirt with a single surface node of grass, add the lines below marked by '-- *' (code untested). An 'under' table is added which stores the biome number of the previous fine material node added in each vertical column. 'if density &lt; 0 and under ~= 0 then' checks for air immediately above a fine material node, and 'data[viu] = c_grass' places a surface node underneath that air node, replacing the existing dirt node.<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>&nbsp; &nbsp;local c_dirt = minetest.get_content_id(&quot;default:dirt&quot;) -- *<br />&nbsp; &nbsp;local c_grass = minetest.get_content_id(&quot;default:dirt_with_grass&quot;) -- *<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;local sidelen = x1 - x0 + 1<br />&nbsp; &nbsp;local chulens = {x=sidelen, y=sidelen, z=sidelen}<br />&nbsp; &nbsp;local minposxyz = {x=x0, y=y0, z=z0}<br />&nbsp; &nbsp;local minposxz = {x=x0, y=z0}<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;local nvals_terrain = minetest.get_perlin_map(np_terrain, chulens):get3dMap_flat(minposxyz)<br />&nbsp; &nbsp;local nvals_biome = minetest.get_perlin_map(np_biome, chulens):get2dMap_flat(minposxz)<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;local nixyz = 1 -- 3D noise index<br />&nbsp; &nbsp;local nixz = 1 -- 2D noise index<br />&nbsp; &nbsp;local stable = {}<br />&nbsp; &nbsp;local under = {} -- *<br />&nbsp; &nbsp;for z = z0, z1 do<br />&nbsp; &nbsp;&nbsp; &nbsp;for x = x0, x1 do<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local si = x - x0 + 1<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local nodename = minetest.get_node({x=x,y=y0-1,z=z}).name<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if nodename == &quot;air&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;or nodename == &quot;default:water_source&quot; then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;stable&#91;si&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;stable&#91;si&#93; = STABLE<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;for y = y0, y1 do<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local vi = area:index(x0, y, z)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local viu = area:index(x0, y-1, z) -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;for x = x0, x1 do<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local si = x - x0 + 1<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local grad = (TERCEN - y) / TERSCA<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local density = nvals_terrain&#91;nixyz&#93; + grad<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local n_biome = nvals_biome&#91;nixz&#93; -- biome noise for node<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;local biome = false -- set biome id to undefined<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if n_biome &gt; 0.46 + math.random() * 0.04 then -- set biome id<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;biome = 3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif n_biome &lt; -0.5 + math.random() * 0.04 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;biome = 1<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;biome = 2<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if density &gt;= TSTONE then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if biome == 3 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_n23destone<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else -- biomes 1 and 2<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_n23stone<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;stable&#91;si&#93; = stable&#91;si&#93; + 1<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif density &gt;= 0 and density &lt; TSTONE and stable&#91;si&#93; &gt;= 2 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if y &lt;= YWATER + 3 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_sand<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif biome == 3 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_desand<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 3 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif biome == 1 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_flosand<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 1 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else -- biome = 2<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_dirt -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 2 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif y &lt;= YWATER then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if biome == 1 and y &gt;= YWATER - 3 then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_ice<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else -- biomes 2 and 3<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_water<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;stable&#91;si&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;elseif density &lt; 0 and under&#91;si&#93; ~= 0 then -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;if under&#91;si&#93; = 2 then -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;viu&#93; = c_grass -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;else<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;data&#91;vi&#93; = c_air<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;stable&#91;si&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;under&#91;si&#93; = 0 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nixyz = nixyz + 1 -- increment 3D noise index<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nixz = nixz + 1 -- increment 2D noise index<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;vi = vi + 1<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;viu = viu + 1 -- *<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;nixz = nixz - 80 -- rewind 2D noise index by 80 nodes for next x row above<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;&nbsp; &nbsp;nixz = nixz + 80 -- fast-forward 2D noise index by 80 nodes for next northward xy plane<br />&nbsp; &nbsp;end</code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p139035" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p139035">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>4aiman</strong> &raquo; Thu Apr 24, 2014 6:05 am </p>

			<div class="content">Thanks a lot, paramat! You're amazing! :)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>4aiman</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1208</dd><dd><strong>Joined:</strong> Mon Jul 30, 2012 5:47 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p139104" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p139104">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Thu Apr 24, 2014 2:24 pm </p>

			<div class="content">Yeah i know =}<br /><br />Does that code work? if not post the error message.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p147852" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p147852">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RHR</strong> &raquo; Wed Jul 09, 2014 6:22 pm </p>

			<div class="content"><blockquote><div><cite>paramat wrote:</cite>Does that code work? </div></blockquote><br />Hey Paramat, your code works fine! Thank you very much, it is very usefull!  I'm trying to customize this mod and add some new features, so I have some questions:<br />1) How can I add caves e.g. <a href="https://forum.minetest.net/viewtopic.php?f=9&amp;t=9601" class="postlink">subterrain</a> or just air pockets in the stone<br />2) Which parts of the mapgen need lots of performance or what should I avoid to keep the mapgen fast?<br />3) How can I repeat the area e.g. force it to spawn from -30,000 to -28,000 and repeat it every 2,000 nodes up to +30,000?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>RHR</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 215</dd><dd><strong>Joined:</strong> Mon Jan 27, 2014 8:07 pm</dd>
			<dd><strong>GitHub:</strong> RHRhino</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p147863" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p147863">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Wuzzy</strong> &raquo; Wed Jul 09, 2014 7:17 pm </p>

			<div class="content">Sorry, dude. I found some unstable sand:<br /><img src="https://i.imgur.com/c66RnmF.png" alt="Image" /><br />Coordinates and seed are in screenshot.<br /><br />Edit. I have seen further cases where there is hanging sand. In all instances, the sand hangs at Y=7006. I hope this information helps.<br /><br />Edit 2: OK, there is floating/hanging sand even at different heights:<br /><img src="https://i.imgur.com/oT8IfnT.png" alt="Image" /><br />This is an interesting case. Here, there is a floating sand island; it is not connected to the main land at all. In the background, you can see more hanging sand and another floating island.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Wuzzy</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3430</dd><dd><strong>Joined:</strong> Mon Sep 24, 2012 3:01 pm</dd>
			<dd><strong>GitHub:</strong> Wuzzy2</dd>
			<dd><strong>In-game:</strong> Wuzzy</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p147886" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p147886">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>HeroOfTheWinds</strong> &raquo; Wed Jul 09, 2014 10:41 pm </p>

			<div class="content">If I were to guess, I would  say that probably cave generation cut out the bottom after it was generated.  That being said, it DOES look a little bit too clean cut for that...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>HeroOfTheWinds</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 470</dd><dd><strong>Joined:</strong> Wed Apr 23, 2014 11:16 pm</dd>
			<dd><strong>GitHub:</strong> HeroOfTheWinds</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p147899" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p147899">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Wuzzy</strong> &raquo; Thu Jul 10, 2014 2:02 am </p>

			<div class="content">I found the bug!<br />The problem lies in the stability detection:<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>for z = z0, z1 do -- for each xy plane progressing northwards<br />for x = x0, x1 do<br />local si = x - x0 + 1<br />local nodename = minetest.get_node({x=x,y=y0-1,z=z}).name<br />if nodename == &quot;air&quot;<br />or nodename == &quot;default:water_source&quot; then<br />&nbsp; &nbsp;stable&#91;si&#93; = 0<br />else<br />&nbsp; &nbsp;stable&#91;si&#93; = STABLE<br />end<br />end<br /></code></dd></dl><br />Looks OK, right? No. What if the node type is ignore? No wonder it was so clear cut, it was a typical MapBlock/chunk border (whatever) problem.<br /><br />All that is needed for a fix is to check to check for ignore, too.<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>local si = x - x0 + 1<br />local nodename = minetest.get_node({x=x,y=y0-1,z=z}).name<br />if nodename == &quot;air&quot;<br />or nodename == &quot;ignore&quot;<br />or nodename == &quot;default:water_source&quot; then<br />&nbsp; &nbsp;stable&#91;si&#93; = 0<br />else<br />&nbsp; &nbsp;stable&#91;si&#93; = STABLE<br />end<br /></code></dd></dl><br />If the code doesn’t know what is below the node, I assume the worst (there is air or water below it), which is the safest choice. If the assumption was wrong, this is not a problem, just some sand is removed then.<br /><br />Actually, the code could be even improved further. Why limit ourselves to default:water_source? We can generalize that by checking wheather the node is not walkable (=passable for falling nodes). default:water_source is not walkable, air is not walkable either, so I can merge it.<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>local si = x - x0 + 1<br />local nodename = minetest.get_node({x=x,y=y0-1,z=z}).name<br />if nodename == &quot;ignore&quot;<br />or minetest.registered_nodes&#91;nodename&#93;.walkable == false then<br />&nbsp; &nbsp;stable&#91;si&#93; = 0<br />else<br />&nbsp; &nbsp;stable&#91;si&#93; = STABLE<br />end<br /></code></dd></dl><br /><br />I tested it for myself on the screenshot positions. If you want to help, please test it for yourselves, too. Bring yourself to these positions and tell me wheather there is floating sand or not. For me, there was no more floating sand at these positions.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Wuzzy</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3430</dd><dd><strong>Joined:</strong> Mon Sep 24, 2012 3:01 pm</dd>
			<dd><strong>GitHub:</strong> Wuzzy2</dd>
			<dd><strong>In-game:</strong> Wuzzy</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p148030" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p148030">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Fri Jul 11, 2014 12:31 am </p>

			<div class="content">HeroOfTheWinds nope, these happen on chunk borders.<br /><br />Wuzzy thats exactly the cause, but it's intentional :) I put a check for ignore in there at first but removed it. When the upper chunk is generated first, the safe assumption you made creates horrible looking cutoffs in the sand, i much prefer the 'look' of the unsafe assumption and it's more fun to go around collapsing, or better have random collapse by ABM. The walls of sand from collapses are beautiful. Chunks are more often generated upwards when exploring on foot, you get to see more of this when flying though.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p148043" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p148043">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Wuzzy</strong> &raquo; Fri Jul 11, 2014 3:50 am </p>

			<div class="content">&gt;:-O You gotta me kidding me! In your first post you wrote that stability was a goal, now you tell me that you actually don’t care about this goal.<br />I think stability is a good thing and having a map gen which supports that is even better. If there is a lot of hanging sand and it all falls down because you dig one node, Minetest can slow down extremely. :-/<br />And I am yet to see “horrible cutoffs in the sand”. Pics (and coords and seed) or it didn’t happen. :P</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Wuzzy</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3430</dd><dd><strong>Joined:</strong> Mon Sep 24, 2012 3:01 pm</dd>
			<dd><strong>GitHub:</strong> Wuzzy2</dd>
			<dd><strong>In-game:</strong> Wuzzy</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p148045" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p148045">Re: [Mod] Mapgen framework, 2D and 3D perlin noise [0.1.1] [</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Fri Jul 11, 2014 4:04 am </p>

			<div class="content">Heh, the cutoffs happen when generating chunks downwards, i might search out an example.<br /><br />RHR, fixed parameter TERCEN defines average terrain level, so needs to become a variable 'tercen' that is rounded to the nearest realm layer. In the on-generated function change TERCEN to 'tercen' then insert this code at line 105:<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>&nbsp; &nbsp;local chulay = math.floor((minp.y + 32) / 80) -- chunk layer number, 0 = surface chunk<br />&nbsp; &nbsp;local tercen = (math.floor(chulay / CHUINT) * CHUINT + CHUINT / 2) * 80 - 32 -- terrain centre of this realm layer<br /></code></dd></dl><br />Where new parameter CHUINT is the vertical distance between realm layers measured in chunks (80 nodes).<br /><br />For caves see my newest mod which does what you want. Add a 3D noise, define boolean 'nofis' (no fissure / no cave) then add a 'and nofis' in the line deciding whether to place stone.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p170135" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p170135">Re: [Mod] Mapgen framework/example [0.2.0] [noise23]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Sat Feb 14, 2015 9:41 am </p>

			<div class="content">Version 0.2.0<br />Minetest 0.4.11 rewrite with the new noise features and all the corrections and optimisations i recently learned from hmmmm.<br />Now 3 simple biomes: grassland, desert and tundra.<br />16 nodes of perlinmap overgeneration to minimise mapchunk border glitches.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p170147" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p170147">Re: [Mod] Mapgen framework/example [0.2.0] [noise23]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>afflatus</strong> &raquo; Sat Feb 14, 2015 12:04 pm </p>

			<div class="content">Downloaded for study. Thank you!</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>afflatus</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 319</dd><dd><strong>Joined:</strong> Tue Apr 01, 2014 7:47 pm</dd>
			<dd><strong>GitHub:</strong> 0-afflatus</dd>
			<dd><strong>In-game:</strong> afflatus</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p345266" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p345266">Re: [Mod] Mapgen framework/example [0.2.0] [noise23]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sirrobzeroone</strong> &raquo; Thu Mar 07, 2019 3:05 am </p>

			<div class="content">Hi<br />     I'm not sure i'm using the example correctly or if it works for ver 0.4.17.1 (win64). I downloaded the example and placed it as a mod just called noise23 under the mods folder. Went into the regular UI and created a new game using Minetestgame as base I just left the settings as on the creation screen. Then I enabled noise23 as the only mod.<br /><br />I loaded the game for the first time and everything is black and I think I'm falling hard to say with an all black screen. Everything is working correctly, inventory, health bar etc. Its like my character is just hanging in a black void. Did I stuff something or did something major change with 0.4.17.1 which means the code needs an update?<br /><br />Thanks for the help<br /><br /><span style="color: #FF0000">EDIT: Working okay I was apparently inside a Mountain had to turn on fly and noclip to get out</span></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>sirrobzeroone</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 37</dd><dd><strong>Joined:</strong> Mon Jul 16, 2018 7:56 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p345618" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/11_8628.htm#p345618">Re: [Mod] Mapgen framework/example [0.2.0] [noise23]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>paramat</strong> &raquo; Sun Mar 10, 2019 8:26 am </p>

			<div class="content">I have a few lua mapgen mods like this that are 'proof of concept' or are mapgen code examples, so don't have proper spawning code and spawn you in mid-air or inside ground.<br />The mod thread *should* mention this already (maybe it doesn't).</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>paramat</strong>
			</dt>
			<dd>Developer</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3371</dd><dd><strong>Joined:</strong> Sun Oct 28, 2012 12:05 am</dd>
			<dd><strong>GitHub:</strong> paramat</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			24 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=11" class="left-box left" accesskey="r">Return to Mod Releases</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>

