
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/9_16248.htm

  The following page was cached by Bing Bot (https://bing.com/) on 28-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - [Mod]No Escape ![For PvP][0.2]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - [Mod]No Escape ![For PvP][0.2]" href="https://forum.minetest.net/feed.php?f=9&amp;t=16248" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=9">WIP Mods</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=16248">[Mod]No Escape ![For PvP][0.2]</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			9 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p244005" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244005">[Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Sirvoid</strong> &raquo; Sun Dec 25, 2016 11:08 pm </p>

			<div class="content"><span style="font-weight: bold"><span style="font-size: 150%; line-height: 116%;"><span style="color: #FF0000">                            NO ESCAPE</span></span><br /></span><br />This simple mod prevent people to do /spawn or /home during a Fight with another player. <span style="font-weight: bold"><span style="font-style: italic">There is no Escape !!!</span></span><br /><br /><span style="font-weight: bold">Feature:</span><br />-You can't do /spawn &amp; /home during a Fight<br />-You can do it again after X seconds (You can set the seconds in the init file (15 by default))<br />-There is No Escape !<br />-Seriously there is No Escape don't try to run ...<br /><br /><a href="https://github.com/Sirvoid/NoEscape" class="postlink">GitHub</a><br /><a href="https://github.com/Sirvoid/NoEscape/archive/master.zip" class="postlink">Download</a><br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>------V0.2-------<br />-All the known bugs have been resolved.<br />-The code has been cleaned Big thanks to Taikedz!<br />-----------------<br /></code></dd></dl><br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>Licence: WTFPL<br /><br />DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE<br /><br />Version 2, December 2004<br /><br />Copyright (C) 2004 Sam Hocevar sam@hocevar.net<br /><br />Everyone is permitted to copy and distribute verbatim or modified copies of this license document, and changing it is allowed as long as the name is changed.</code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Sirvoid</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 47</dd><dd><strong>Joined:</strong> Thu Feb 04, 2016 10:12 pm</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p244060" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244060">Re: [Mod]No Escape ![For PvP][0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>taikedz</strong> &raquo; Mon Dec 26, 2016 2:25 pm </p>

			<div class="content">Nice one.<br /><br />Really hate these hit-and-run people who try you then realize they could kick their butts and /spawn out .... This'll be good :-D</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>taikedz</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 676</dd><dd><strong>Joined:</strong> Sun May 15, 2016 11:11 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p244063" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244063">Re: [Mod]No Escape ![For PvP][0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>taikedz</strong> &raquo; Mon Dec 26, 2016 2:43 pm </p>

			<div class="content"><blockquote><div><cite>Naj wrote:</cite>Does it work for mobs also ?</div></blockquote><br /><br />What, so that if you are hit by a mob you can't escape? That would be plain mean :D<br /><br />That being said, a mob that removes your home and spawn privs when you attack it could be interesting ;-)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>taikedz</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 676</dd><dd><strong>Joined:</strong> Sun May 15, 2016 11:11 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p244527" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244527">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ManElevation</strong> &raquo; Thu Dec 29, 2016 7:50 am </p>

			<div class="content">this is pretty nice, I might put this my server is up</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>ManElevation</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 896</dd><dd><strong>Joined:</strong> Tue Aug 02, 2016 10:04 pm</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p244682" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244682">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Sirvoid</strong> &raquo; Fri Dec 30, 2016 10:14 pm </p>

			<div class="content"><blockquote><div><cite>Naj wrote:</cite>Does it work for mobs also ?</div></blockquote><br /><br />That is not a bad idea. Maybe I could make something optional for that  ^^<br /><br /><blockquote><div><cite>ManElevation wrote:</cite>this is pretty nice, I might put this my server is up</div></blockquote><br /><br />Sure ! I would not say no to see the mod running on a server with some players.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Sirvoid</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 47</dd><dd><strong>Joined:</strong> Thu Feb 04, 2016 10:12 pm</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p244948" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p244948">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Fixer</strong> &raquo; Sun Jan 01, 2017 11:47 pm </p>

			<div class="content">Thanks. Very needed for survival.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Fixer</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 891</dd><dd><strong>Joined:</strong> Sun Jul 31, 2011 11:23 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p307967" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p307967">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RWЯ</strong> &raquo; Thu Jan 11, 2018 6:01 am </p>

			<div class="content">What if player start to log off?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>RWЯ</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 111</dd><dd><strong>Joined:</strong> Thu Jun 29, 2017 11:21 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p307998" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p307998">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ChimneySwift</strong> &raquo; Thu Jan 11, 2018 1:03 pm </p>

			<div class="content">Now we just need a mod which prevents people teleport requesting you into lava :rolling_eyes:</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>ChimneySwift</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 320</dd><dd><strong>Joined:</strong> Fri Sep 22, 2017 6:46 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349225" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/9_16248.htm#p349225">Re: [Mod]No Escape ![For PvP][0.2]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Fixer</strong> &raquo; Fri Apr 19, 2019 9:45 pm </p>

			<div class="content">Original repo no longer available, full mod code (create a folder for it and paste into new init.lua file):<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>-----------------------------------------------------------<br />-- This mod remove the home and spawn privileges during a fight.<br />-- Thanks to Taikedz for cleaning the code--<br />-------------configuration---------------------------------<br /><br />-- Other player cannot escape<br />-- false if the player being hit can't teleport when someone hits them.<br />local OPCE = false<br /><br />-- How long in seconds until a battle ends (times since last hit)<br />local battletimeout = 15<br /><br />-- Fight start message<br />local FightMessage = &quot;You entered a Fight !&quot;<br /><br />-- Fight end message<br />local EndFightMessage = &quot;The Fight is Over !&quot;<br /><br />---------------------------------------------<br /><br />-- Get default privs at server level<br />local default_privs = minetest.setting_get(&quot;default_privs&quot;) or &quot;&quot;<br />default_privs = default_privs:split(&quot;,&quot;)<br /><br />local dprivs = {}<br />for _,v in pairs(default_privs) do<br />&nbsp; &nbsp;dprivs&#91;v&#93; = true<br />end<br /><br />local playerinpvp = {}<br /><br />local function limit_privs(playername)<br />&nbsp; &nbsp;local privs = minetest.get_player_privs(playername)<br />&nbsp; &nbsp;privs.home = nil<br />&nbsp; &nbsp;privs.spawn = nil<br />&nbsp; &nbsp;minetest.set_player_privs(playername, privs)<br />end<br /><br />local function setplayerpvp(playername, isvictim)<br />&nbsp; &nbsp;if isvictim and OPCE == true then return end<br /><br />&nbsp; &nbsp;if not playerinpvp&#91;playername&#93; then<br />&nbsp; &nbsp;&nbsp; &nbsp;playerinpvp&#91;playername&#93; = 0<br />&nbsp; &nbsp;&nbsp; &nbsp;minetest.chat_send_player(playername, FightMessage)<br />&nbsp; &nbsp;&nbsp; &nbsp;limit_privs(playername)<br />&nbsp; &nbsp;end<br />end<br /><br />local function resettime(playername)<br />&nbsp; &nbsp;if playerinpvp&#91;playername&#93; ~= nil then<br />&nbsp; &nbsp;&nbsp; &nbsp;playerinpvp&#91;playername&#93; = 0<br />&nbsp; &nbsp;end<br />end<br /><br />local function restoreprivs(fighter)<br />&nbsp; &nbsp;local privs = minetest.get_player_privs(fighter)<br />&nbsp; &nbsp;privs.home = dprivs.home<br />&nbsp; &nbsp;privs.spawn = dprivs.spawn<br /><br />&nbsp; &nbsp;minetest.set_player_privs(fighter, privs)<br /><br />&nbsp; &nbsp;playerinpvp&#91;fighter&#93; = nil<br />end<br /><br />minetest.register_on_punchplayer(function(player, hitter)<br />&nbsp; &nbsp;if not (player:is_player() and hitter:is_player() ) then<br />&nbsp; &nbsp;&nbsp; &nbsp;return<br />&nbsp; &nbsp;end<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;local hittername = hitter:get_player_name()<br />&nbsp; &nbsp;local victimname = player:get_player_name()<br /><br />&nbsp; &nbsp;setplayerpvp(hittername)<br />&nbsp; &nbsp;setplayerpvp(victimname, true) -- moved OPCE check<br /><br />&nbsp; &nbsp;resettime(hittername)<br />&nbsp; &nbsp;resettime(victimname) -- won't affect non-registered victims<br />end)<br /><br />minetest.register_globalstep(function(dtime)<br />&nbsp; &nbsp;for fighter,oldtime in pairs(playerinpvp) do<br />&nbsp; &nbsp;&nbsp; &nbsp;local newtime = oldtime + dtime<br />&nbsp; &nbsp;&nbsp; &nbsp;playerinpvp&#91;fighter&#93; = newtime<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp;if newtime &gt;= battletimeout then<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;restoreprivs(fighter)<br />&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;minetest.chat_send_player(fighter, EndFightMessage)<br />&nbsp; &nbsp;&nbsp; &nbsp;end<br />&nbsp; &nbsp;end<br />end)<br /><br />minetest.register_on_joinplayer(function(player)<br />&nbsp; &nbsp;restoreprivs( player:get_player_name() )<br />end) </code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Fixer</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 891</dd><dd><strong>Joined:</strong> Sun Jul 31, 2011 11:23 am</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			9 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=9" class="left-box left" accesskey="r">Return to WIP Mods</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
