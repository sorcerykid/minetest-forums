
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm

  The following page was cached by Yandex Bot (https://yandex.com/) on 27-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - Mobkit - Entity API [mobkit][wip]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Mobkit - Entity API [mobkit][wip]" href="https://forum.minetest.net/feed.php?f=9&amp;t=22112" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=9">WIP Mods</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=22112">Mobkit - Entity API [mobkit][wip]</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			65 posts
			 &bull; Page <strong>3</strong> of <strong>3</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p347270" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347270">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Tue Mar 26, 2019 22:26 </p>

			<div class="content">Working on a new simple mod example<br /><br /><img src="https://i.ibb.co/8zT6Qr2/chase3.gif" alt="Image" /><br /><br />Planned: some wildlife that go about minding their own business and simple spawning logic that doesn't involve the dreaded ABM.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347314" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347314">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>texmex</strong> &raquo; Wed Mar 27, 2019 08:36 </p>

			<div class="content">I wonder, why do mobs need to jump to climb nodes? Why not just increase stepheight to 1.1 and let them smoothly climb node edges?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>texmex</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1293</dd><dd><strong>Joined:</strong> Mon Jul 11, 2016 21:08</dd>
			<dd><strong>GitHub:</strong> tacotexmex</dd>
			<dd><strong>In-game:</strong> texmex</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347356" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347356">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Wed Mar 27, 2019 21:44 </p>

			<div class="content"><blockquote><div><cite>texmex wrote:</cite>I wonder, why do mobs need to jump to climb nodes? Why not just increase stepheight to 1.1 and let them smoothly climb node edges?</div></blockquote><br />Good question, short answer is I don't think setting stepheight that high makes much sense.<br /><br />Firstly, it's extremely glitchy, I've tested it with similar values, the result is anything but smooth.<br /><br />Secondly, even if it was functioning properly, to say that teleporting instantly one meter upwards is what can be called smooth is debatable at the least.<br /><br />Thirdly, as I've said one of my goals is to keep it consistent. Players do have to jump full nodes by default, and I don't see a good reason for mobs to behave differently.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347359" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347359">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Lone_Wolf</strong> &raquo; Wed Mar 27, 2019 21:55 </p>

			<div class="content"><blockquote><div><cite>Termos wrote:</cite><blockquote><div><cite>texmex wrote:</cite>I wonder, why do mobs need to jump to climb nodes? Why not just increase stepheight to 1.1 and let them smoothly climb node edges?</div></blockquote><br />Good question, short answer is I don't think setting stepheight that high makes much sense.<br /><br />Firstly, it's extremely glitchy, I've tested it with similar values, the result is anything but smooth.<br /><br />Secondly, even if it was functioning properly, to say that teleporting instantly one meter upwards is what can be called smooth is debatable at the least.<br /><br />Thirdly, as I've said one of my goals is to keep it consistent. Players do have to jump full nodes by default, and I don't see a good reason for mobs to behave differently.</div></blockquote><br />IMO they look more intelligent when they jump instead of use stepheight</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Lone_Wolf</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2151</dd><dd><strong>Joined:</strong> Sun Apr 09, 2017 05:50</dd>
			<dd><strong>GitHub:</strong> LoneWolfHT</dd>
			<dd><strong>In-game:</strong> Lone_Wolf</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347685" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347685">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>runs</strong> &raquo; Sun Mar 31, 2019 21:33 </p>

			<div class="content">When you complete it, my Petz mod will support your engine/API as an alternative to mobs_redo.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>runs</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 386</dd><dd><strong>Joined:</strong> Sat Oct 27, 2018 08:32</dd>
			<dd><strong>GitHub:</strong> runsy</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347750" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347750">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ShadMOrdre</strong> &raquo; Mon Apr 01, 2019 16:11 </p>

			<div class="content">The stepheight issue can also be mitigated by using the Natural_Slopes mod, or one similar.  This mod replaces all edge nodes with a stair node or, if desired, a slope node.  Not only does it smooth the terrain, nice effect, but it also means I can walk without having to jump every other node, as long as the node I am stepping to has been &quot;smoothed&quot; to a slope or stair.  A side effect of the mod is that for the nodes that are not converted, it roughens the terrain.<br /><br />However, in all this, the mobs_redo mobs still have issues walking around.  Is this mod compatible, or usable, with mobs_redo?  Burlis' pathfinder mod works with mobs_redo by changing a line or two in mobs_redo api.  Is this in some way also a drop in replacement to mobs_redo default behaviour, since it seems to be the dominant mobs mod?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>ShadMOrdre</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 297</dd><dd><strong>Joined:</strong> Mon Dec 29, 2014 08:07</dd>
			<dd><strong>GitHub:</strong> ShadMOrdre</dd>
			<dd><strong>In-game:</strong> shadmordre</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347782" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p347782">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Mon Apr 01, 2019 21:19 </p>

			<div class="content"><blockquote><div><cite>ShadMOrdre wrote:</cite>The stepheight issue can also be mitigated by using the Natural_Slopes mod, or one similar.  This mod replaces all edge nodes with a stair node or, if desired, a slope node.</div></blockquote><br />This is one way of dealing with such issues. However mobkit is dependency free by design so it won't rely or even be aware of any specific mods.<br />Also this is a for-fun project, so I'd rather embrace the blockiness and appreciate the challenges it offers.<br /><br /><blockquote><div><cite>ShadMOrdre wrote:</cite> Is this mod compatible, or usable, with mobs_redo?</div></blockquote><br />Probably.<br />Mobkit has no dependencies and the example mod I'm working on cares only about entities registered by itself, so if Redo also keeps to its own stuff they may work alongside each other out of the box.<br />But I'm not actively trying to ensure compatibility with any existing mods.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348016" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348016">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Wed Apr 03, 2019 21:47 </p>

			<div class="content"><span style="font-weight: bold">Preview Update</span><br />Wildlife edition<br /><br /><img src="https://i.ibb.co/X2Gc4cz/wildlife.png" alt="Image" /><br /><br />It is still a preview, as I don't feel it deserves any Greek letter in its current state.<br />I don't recommend using the API for development yet, cause it will get better. <br /><br />There's an example mod included, 'wildlife'. It's quite simple, but functional.<br />In his journeys, player will sometimes encounter some wild animals, and may observe the Darwinian principle in action.<br /><br /><span style="font-weight: bold">What's inside: </span>	<br /><br /><span style="font-weight: bold">herbivore mob:</span><br /><ul>will flee from predators and players</ul><br /><span style="font-weight: bold">predator mob:</span><br /><ul>will chase and try to kill nearby herbivores<br />when idle, will try to repel player if they come too close<br />will attack player if they ignore the warning for too long or come closer still</ul><br /><span style="font-weight: bold">spawn function</span>:<br /><ul>stealthy: it's difficult to see it in action, all spawns happen in active block range distance from the nearest player<br />lightweight: ABM free and spawns for different players are done in different engine steps, so it doesn't put any noticeable load on the server.<br />self adjusting: the more entities in range, the less likely it is for new spawns to happen.</ul><br />Download link in the post #1</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348052" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348052">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>R-One</strong> &raquo; Thu Apr 04, 2019 09:06 </p>

			<div class="content">Hi, again I find your job super cool.<br /><br />I tested and look at the code in a hurry, the examples like that really allow to understand the principles, thank you very much.<br /><br />If I understand correctly, the spawn will be managed by the mods and not the API.<br />Besides, how do you make a spawn on a specific type of block?<br /><br />And if not, when is it from the animation of mobs and loots to their death?<br /><br />Once again thank you very much for the answers in advance.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>R-One</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 105</dd><dd><strong>Joined:</strong> Wed Dec 20, 2017 23:06</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348130" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348130">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Fri Apr 05, 2019 11:33 </p>

			<div class="content"><blockquote><div><cite>R-One wrote:</cite>If I understand correctly, the spawn will be managed by the mods and not the API.<br />Besides, how do you make a spawn on a specific type of block?</div></blockquote><br />There are countless ways to do spawns, many of them right, so I don't think it's API's job to implement any specific one of them<br /><br />As to the question, after <span style="font-style: italic">mobkit.get_terrain_height(pos)</span> has been called, you know if you can spawn there, terrain height at that point and if it is dry land.<br />You can calculate the position of interest, which is pos.x,height,pos.z and this is all you need in most scenarios. Then you can use the position to <span style="font-style: italic">minetest.get_biome_data</span> or to <span style="font-style: italic">mobkit.nodeatpos().groups</span> for example, and determine if you can spawn there and what to spawn according to specific mod requirements.<br /><br /><blockquote><div><cite>R-One wrote:</cite>And if not, when is it from the animation of mobs and loots to their death?.</div></blockquote><br />I'm considering if MC style drop isn't too specific. Anyway, you can edit <span style="font-style: italic">hq_die</span>, call <span style="font-style: italic">minetest.add_item</span> and spawn anything you need.<br />In my mod I would probably spawn a leveled carcass node instead, which could be butchered for resources or eaten by preds, and maybe give off the buzzing flies sound.<br /><br />As for animations, the truth is I've yet to teach myself rigging, and I'm not sure when I will (priorities, priorities)<br />If anyone would offer to give me a hand rigging, I'd probably accept.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348378" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348378">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Mon Apr 08, 2019 19:57 </p>

			<div class="content">Perpetuum Mobile<br /><img src="https://i.ibb.co/MZRz3mg/obstacle2.gif" alt="Image" /><br /><br />One of obstacle courses I set up to test the new refined movement code (post-update, if you try this with the preview code they'll probably fall).<br />The clip is realtime, speed is 6 m/s (players is 4) which means mobs can keep up with the player most of the time, and outrun them easily on flattish terrain (given they don't use cheats ofc).<br /><br />They can do faster, but the greater the speed, the greater the probability of failure due to occasional excessive engine step duration events, which inevitably happen sometimes.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348379" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348379">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>R-One</strong> &raquo; Mon Apr 08, 2019 20:09 </p>

			<div class="content">hello, your work is really impressive ... look forward to see more!<br /><br />I find your idea of carcass during the deaths really great.<br /><br />There are a lot of people who hack a bit like me who will need examples and docs to take in hand like me the thing.<br /><br />I still wonder how to handle the spwan in the right way in an external mod :-/<br /><br />Thanks again for this new API</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>R-One</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 105</dd><dd><strong>Joined:</strong> Wed Dec 20, 2017 23:06</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348688" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348688">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Fri Apr 12, 2019 19:32 </p>

			<div class="content"><blockquote><div><cite>R-One wrote:</cite>I still wonder how to handle the spwan in the right way in an external mod :-/</div></blockquote><br />I'd like to help you with this, but really, what's wrong or right depends mainly on what your mod is supposed to do.<br /><br />As far as the usual MC approach goes, you mentioned spawning on specific nodes. I think in MT version 5.x this makes sense only if ABM is used because they take node names and groups as parameters, but then, using ABMs for spawns is not right imo.<br /><br /><br />I suggest starting with the example - spawnstep() function, the most important bit is this:<br /><br />	<span style="color: #000080">local height, liquidflag = mobkit.get_terrain_height(pos2,32)</span><br /><br />If height ~= nil then you know you can potentially spawn there, update the position<br /><br />	<span style="color: #000080">pos2.y = height</span><br /><br />This position can be used e.g. to get biome data, the simplest scenario could be just heat<br /><br />	<span style="color: #000080">minetest.get_biome_data(pos2).heat</span><br /><br />Your mobs should have a parameter corresponding to this, something like heat={min=?,max=?).<br />Then you would iterate over minetest.registered_entities table and put all the egligible mobs' names into a temporary table. <br />Then the simplest scenario would be if all mobs had equal chances to spawn, so you could do<br /><br />	<span style="color: #000080">if #tmptab &gt; 0 then minetest.add_entity(pos2,tmptab[math.random(#tmptab)])</span><br /><br />That's about it. If you wanted MC style monsters, then you could do the following first:<br />	<span style="color: #000080">minetest.get_node_light(pos2) </span><br />and if it's dark enough spawn a monster instead. <br /><br />This is overall pretty trivial stuff, the most tricky part is determining terrain height at (x,z) but there's a function for that already.<br />Much more fun problem to solve would be for example, if you built a wall around a fairly large area (larger than active block range) and wanted to prevent mobs from spawning inside. This would require approaching the problem from the opposite end.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348752" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p348752">Re: Mobkit - Entity API [mobkit][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>R-One</strong> &raquo; Sat Apr 13, 2019 08:41 </p>

			<div class="content">First of all thank you for taking the time to answer, I remind you, I am just a novice who does not have much time to do what he wants.<br /><br />I have several uses:<br /><br />1- the mod of mobs with a running operation: the sorting of the spawn will be done by biome, altitude, brightness, scarcity of spwan.<br /><br />2- Another NPC style mod. The npc spwan works from one or more blocks already generated in the world.<br /><br />As usual, thank you very much for your work</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>R-One</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 105</dd><dd><strong>Joined:</strong> Wed Dec 20, 2017 23:06</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349677" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_22112_50.htm#p349677">Re: Mobkit - Entity API [mobkit</nobr>][wip]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Termos</strong> &raquo; Wed Apr 24, 2019 18:16 </p>

			<div class="content">Coming up next: buoyancy and water based behaviors<br /><br /><img src="https://i.ibb.co/y4cLMjr/fall.gif" alt="Image" /><br />One of the advantages of physics based approach, this effect didn't take any additional coding. That they still die if they hit water surface with high enough velocity is an emergent outcome of buoyancy, liquid resistance and acceleration based fall damage.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Termos</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Sun Dec 16, 2018 12:50</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			65 posts
			 &bull; Page <strong>3</strong> of <strong>3</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=9" class="left-box left" accesskey="r">Return to WIP Mods</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Yandex Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
