
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm

  The following page was cached by Bing Bot (https://bing.com/) on 16-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - [mod] tides [tides]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - [mod] tides [tides]" href="https://forum.minetest.net/feed.php?f=9&amp;t=21600" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=9">WIP Mods</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=21600">[mod] tides [tides]</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			24 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p338545" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338545">[mod] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Fri Dec 21, 2018 1:42 pm </p>

			<div class="content"><span style="font-size: 200%; line-height: 116%;">Tides 0.0.3</span><br /><br />This is a mod <span style="font-weight: bold">that now works!</span> that makes a tide-like effect. The tide will not rise above the default water level, unless you do some worldediting or some other form of cheating. <br /><br />As an unfortunate side-effect, any water above the high-tide-line will be removed.<br /><br />Browse the code: <a href="https://github.com/smeagolthellama/tides" class="postlink">https://github.com/smeagolthellama/tides</a><br />Download: look at the release list.<br /><br /><style>
.spoiler {
	border: solid 1px #eee !important;
	border-radius: 0.2em;
	background: #fff;
	padding: 0.5em 0.75em;
	margin: 0.75em 1em
}
.spoiler_header {
	color: #cb4b16;
	cursor: pointer;
	-moz-user-select: none;
	-webkit-user-select: none;
	user-select: none
}
.spoiler_content {
	margin-top: 0.7em !important;
	padding-top: 0.7em !important;
	padding: .35em 0;
	color: #333;
	border-top: dashed 1px #eee !important
}
</style>
<script>
function spoiler_toggle(event) {
	var node = event.target;
	if (node.nodeName != "DIV") {
		node = node.parentNode;
	}
	var contentNode = node.nextSibling;
	if (contentNode && contentNode.className == "spoiler_content") {
		if(contentNode.style.display == "none") {
			contentNode.style.display = "block";
			node.firstChild.firstChild.nodeValue = "-";
		} else {
			contentNode.style.display = "none";
			node.firstChild.firstChild.nodeValue = "+";
		}
		return false;
	}
	return true;
}
</script>
<div class="spoiler">
	<div class="spoiler_header" onClick="spoiler_toggle(event);"><b>+</b>
		old post
	</div><div class="spoiler_content" style="display: none;">
		Hello there, I have started work on this mod, and it seems to work relatively well.<br /><br />low tide:<br /><img src="https://raw.githubusercontent.com/smeagolthellama/minetest-tides/master/screenshot_20181221_152042.png" alt="Image" /><br /><br />high tide:<br /><img src="https://raw.githubusercontent.com/smeagolthellama/tides/master/screenshot_20181221_152943.png" alt="Image" /><br />&#40;well actually, <span style="font-style: italic">rising</span> tide&#41;<br /><br /><span style="font-weight: bold">github</span>: <a href="https://github.com/smeagolthellama/minetest-tides" class="postlink">https://github.com/smeagolthellama/minetest-tides</a><br /><br /><span style="font-size: 200%; line-height: 116%;">still a WIP, because:</span><br /><style>
.spoiler {
	border: solid 1px #eee !important;
	border-radius: 0.2em;
	background: #fff;
	padding: 0.5em 0.75em;
	margin: 0.75em 1em
}
.spoiler_header {
	color: #cb4b16;
	cursor: pointer;
	-moz-user-select: none;
	-webkit-user-select: none;
	user-select: none
}
.spoiler_content {
	margin-top: 0.7em !important;
	padding-top: 0.7em !important;
	padding: .35em 0;
	color: #333;
	border-top: dashed 1px #eee !important
}
</style>
<script>
function spoiler_toggle(event) {
	var node = event.target;
	if (node.nodeName != "DIV") {
		node = node.parentNode;
	}
	var contentNode = node.nextSibling;
	if (contentNode && contentNode.className == "spoiler_content") {
		if(contentNode.style.display == "none") {
			contentNode.style.display = "block";
			node.firstChild.firstChild.nodeValue = "-";
		} else {
			contentNode.style.display = "none";
			node.firstChild.firstChild.nodeValue = "+";
		}
		return false;
	}
	return true;
}
</script>
<div class="spoiler">
	<div class="spoiler_header" onClick="spoiler_toggle(event);"><b>+</b>
		Spoiler
	</div><div class="spoiler_content" style="display: none;">
		<span style="text-decoration: line-through;"><ul><li> not very reliable </li><li> quite resource intensive</li><li> requres that someone be near mese for the tide to change</li></ul></span>
	</div>
</div><br /><ul><li>only works on default_water, so if you want tides in, say, lava, then... no idea how to do that, sorry.</li></ul>
	</div>
</div><br /><br /><ol style="list-style-type: decimal"><li>0.0.1: initial, wip release.</li><li>0.0.2: tide won't go up, no matter how nicely I beg. Probably should contact King Canute.</li><li>0.0.3: It works! (also, first one with a git tag)<a href="https://github.com/smeagolthellama/tides/archive/v0.0.3.zip" class="postlink">https://github.com/smeagolthellama/tides/archive/v0.0.3.zip</a></li></ol></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p338575" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338575">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Fri Dec 21, 2018 6:52 pm </p>

			<div class="content">The mod is very simple but i like the concept, maybe you could even incorporate some global-warming feature :)<br /><br />EDIT: to get the time in an interval you could use a globalstep:<br /><ul><li> Reference: <!-- m --><a class="postlink" href="https://github.com/minetest/minetest/blob/master/doc/lua_api.txt#L3572">https://github.com/minetest/minetest/bl ... .txt#L3572</a><!-- m --></li><li> Example: <!-- m --><a class="postlink" href="https://github.com/pandorabox-io/skybox/blob/master/init.lua#L182">https://github.com/pandorabox-io/skybox ... t.lua#L182</a><!-- m --></li></ul></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 209</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 5:58 am</dd>
			<dd><strong>GitHub:</strong> thomasrudin-mt</dd>
			<dd><strong>In-game:</strong> BuckarooBanzai</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p338584" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338584">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TumeniNodes</strong> &raquo; Fri Dec 21, 2018 8:56 pm </p>

			<div class="content">This is quite an interesting idea.<br />Already thinking of unlimited uses relating to gameplay<br /><br />This reminds me I should get going on that insurance mod</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TumeniNodes</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2628</dd><dd><strong>Joined:</strong> Fri Feb 26, 2016 7:49 pm</dd>
			<dd><strong>GitHub:</strong> TumeniNodes</dd>
			<dd><strong>In-game:</strong> TumeniNodes</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p338631" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338631">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Sat Dec 22, 2018 1:39 pm </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay wrote:</cite>The mod is very simple but i like the concept, maybe you could even incorporate some global-warming feature :)<br /></div></blockquote><br /><br />in a way, it already exists, in that a mese block needs to exist somewhere for the height to change.<br /><br /><blockquote><div><cite>BuckarooBanzay wrote:</cite>EDIT: to get the time in an interval you could use a globalstep:<br /><ul><li> Reference: <!-- m --><a class="postlink" href="https://github.com/minetest/minetest/blob/master/doc/lua_api.txt#L3572">https://github.com/minetest/minetest/bl ... .txt#L3572</a><!-- m --></li><li> Example: <!-- m --><a class="postlink" href="https://github.com/pandorabox-io/skybox/blob/master/init.lua#L182">https://github.com/pandorabox-io/skybox ... t.lua#L182</a><!-- m --></li></ul></div></blockquote><br /><br />I'm not sure I understand. Are you suggesting that instead of an ABM I should use this to calculate water height?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p338632" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338632">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Sat Dec 22, 2018 1:44 pm </p>

			<div class="content"><blockquote><div><cite>TumeniNodes wrote:</cite>This is quite an interesting idea.<br />Already thinking of unlimited uses relating to gameplay<br /></div></blockquote><br /><br />Sorry, at the moment it is prohibitively resource-intensive (a flood of warnings about ABMs taking 2 to 6 times longer than 200ms). I should probably try to use voxelManips or whatever they're called, but I've no idea how, and can't find anything simple enough for me to understand.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p338643" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p338643">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Sat Dec 22, 2018 4:50 pm </p>

			<div class="content">The ABM solution only works if you are near the given node.<br />To execute code in an interval something like this should work:<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>local timer = 0<br />minetest.register_globalstep(function(dtime)<br />&nbsp; &nbsp;-- increase time var<br />&nbsp; &nbsp;timer = timer + dtime<br />&nbsp; &nbsp;-- run every 2 seconds otherwise abort<br />&nbsp; &nbsp;if timer &lt; 2 then return end<br />&nbsp; &nbsp;-- reset timer<br />&nbsp; &nbsp;timer=0<br />&nbsp; &nbsp;-- do calc stuff<br />&nbsp; &nbsp;height=math.sin(2*math.pi*minetest.get_timeofday())<br />end)<br /></code></dd></dl><br /><br />To make the whole thing less cpu-intensive you could decrease the chance of the water-placement-abm<br />(i mean actually increasing the value so it gets only executed for a few nodes)<br />It should catch up eventually...<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>minetest.register_abm({<br />&nbsp;chance = 20,<br />&nbsp;...<br /></code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 209</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 5:58 am</dd>
			<dd><strong>GitHub:</strong> thomasrudin-mt</dd>
			<dd><strong>In-game:</strong> BuckarooBanzai</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339083" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339083">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Thu Dec 27, 2018 2:59 pm </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay wrote:</cite>The ABM solution only works if you are near the given node.<br />To execute code in an interval something like this should work:<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>local timer = 0<br />minetest.register_globalstep(function(dtime)<br />&nbsp; &nbsp;-- increase time var<br />&nbsp; &nbsp;timer = timer + dtime<br />&nbsp; &nbsp;-- run every 2 seconds otherwise abort<br />&nbsp; &nbsp;if timer &lt; 2 then return end<br />&nbsp; &nbsp;-- reset timer<br />&nbsp; &nbsp;timer=0<br />&nbsp; &nbsp;-- do calc stuff<br />&nbsp; &nbsp;height=math.sin(2*math.pi*minetest.get_timeofday())<br />end)<br /></code></dd></dl><br /></div></blockquote><br /><br />Aha! thanks. That makes sense.<br /><br /><blockquote><div><cite>BuckarooBanzay wrote:</cite>To make the whole thing less cpu-intensive you could decrease the chance of the water-placement-abm<br />(i mean actually increasing the value so it gets only executed for a few nodes)<br />It should catch up eventually...<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>minetest.register_abm({<br />&nbsp;chance = 20,<br />&nbsp;...<br /></code></dd></dl></div></blockquote><br /><br />So... would an abm call every 10 seconds replacing all water be slower than one running every one second replacing 1 in 10? I'd have thought otherwise, but have never even touched the code itself, and this is sort-of my first serious mod, so I have no real idea.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339159" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339159">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Fri Dec 28, 2018 10:03 am </p>

			<div class="content">question: does anyone know of any changes in 5.0.0-dev that might be preventing my abm from doing anything? (also, [it]something[/it] is bringing my water-level back up to what it was at worldgen, even when the tides are supposed to be low (as in -2))</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339162" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339162">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Fri Dec 28, 2018 10:23 am </p>

			<div class="content"><blockquote><div><cite>markthesmeagol wrote:</cite>question: does anyone know of any changes in 5.0.0-dev that might be preventing my abm from doing anything? (also, [it]something[/it] is bringing my water-level back up to what it was at worldgen, even when the tides are supposed to be low (as in -2))</div></blockquote><br /><br />Never mind, it isn't working in 4.15 either. Anyone know why?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339165" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339165">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Fri Dec 28, 2018 10:37 am </p>

			<div class="content"><blockquote><div><cite>markthesmeagol wrote:</cite><blockquote><div><cite>markthesmeagol wrote:</cite>question: does anyone know of any changes in 5.0.0-dev that might be preventing my abm from doing anything? (also, [it]something[/it] is bringing my water-level back up to what it was at worldgen, even when the tides are supposed to be low (as in -2))</div></blockquote><br /><br />Never mind, it isn't working in 4.15 either. Anyone know why?</div></blockquote><br /><br />Is it maybe the neighbouring water nodes flooding in? Haven't tested it though... :P</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 209</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 5:58 am</dd>
			<dd><strong>GitHub:</strong> thomasrudin-mt</dd>
			<dd><strong>In-game:</strong> BuckarooBanzai</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339166" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339166">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Fri Dec 28, 2018 10:55 am </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay wrote:</cite><blockquote><div><cite>markthesmeagol wrote:</cite><blockquote><div><cite>markthesmeagol wrote:</cite>question: does anyone know of any changes in 5.0.0-dev that might be preventing my abm from doing anything? (also, [it]something[/it] is bringing my water-level back up to what it was at worldgen, even when the tides are supposed to be low (as in -2))</div></blockquote><br /><br />Never mind, it isn't working in 4.15 either. Anyone know why?</div></blockquote><br /><br />Is it maybe the neighbouring water nodes flooding in? Haven't tested it though... :P</div></blockquote><br /><br />it looks like that might be it. Any way to disable it?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339359" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339359">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>FaceDeer</strong> &raquo; Sun Dec 30, 2018 2:07 am </p>

			<div class="content">The thing that makes default:water_source behave that way is the property &quot;liquid_renewable = true&quot;, if you override that to be false water will no longer &quot;self-replicate&quot; (lava already behaves this way if you want to see an example). I had to do this in my dynamic_liquid mod [here](<!-- m --><a class="postlink" href="https://github.com/minetest-mods/dynamic_liquid/blob/master/init.lua#L173">https://github.com/minetest-mods/dynami ... t.lua#L173</a><!-- m -->). You might potentially not need to mess with this, though, if you are removing all of the water on a particular y-coordinate fast enough. I'd set it to false for now while you're getting the rest of the mod to work and then see if you still need it once you're done.<br /><br />Taking a quick look at the rest of the mod, I take it the idea here is that depending on the particular time of day you want to destroy the uppermost layers of water in the ocean at certain times of the day and then recreate them again on the other times? There's going to be some tricky edge cases to overcome here no matter how you approach this, but that's part of the fun of making mods. :)<br /><br />Using minetest.register_globalstep is the correct approach to modifying the mapblocks that a player is currently in to account for time changing &quot;before his eyes&quot;, IMO. To update blocks that a player enters into that were last left in a state other than the way it should be now (for example, it's low tide and the player has just entered a mapblock that was left in a high-tide state) I recommend using an LBM instead - look up LoadingBlockModifier in the api documentation, you'll want one with run_at_every_load = true and set to execute on water nodes.<br /><br />That works well for making the water level go down when tide goes out, but making the water come back *up* again is more challenging. You'll need some way to figure out where water is supposed to be - if you just indiscriminately fill the entire y-coordinate's air layer with water you'll inundate the caves and any holes the player might have dug.<br /><br />Unfortunately, I don't think the heightmap for most mapgens is not available after the map block has been generated. And you probably wouldn't want to rely on that anyway in case a player has built a dike and cleared water out of the area. I think what you'll need to do is look for existing water on the level below the one you're trying to fill, check if the water has a clear path through existing water to the edge of the mapblock (to avoid having isolated ponds rising and falling), place new water above it, and then do a flood-fill operation from the edge of that water to make it spread outward. There's still ways this can cause non-ocean water to rise and fall but I expect it'll be fairly rare and maybe not worth worrying about.<br /><br />If you like the sound of that idea and nobody has better suggestions I could whip up some example code to show it in more detail.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>FaceDeer</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 297</dd><dd><strong>Joined:</strong> Sat Aug 29, 2015 7:01 pm</dd>
			<dd><strong>GitHub:</strong> FaceDeer</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339365" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339365">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TumeniNodes</strong> &raquo; Sun Dec 30, 2018 2:36 am </p>

			<div class="content">nvm my thought was daft</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TumeniNodes</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2628</dd><dd><strong>Joined:</strong> Fri Feb 26, 2016 7:49 pm</dd>
			<dd><strong>GitHub:</strong> TumeniNodes</dd>
			<dd><strong>In-game:</strong> TumeniNodes</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339413" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339413">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Astrobe</strong> &raquo; Sun Dec 30, 2018 1:15 pm </p>

			<div class="content">It seems to me that converting the -1 and -2 layers of water into a specialized blocks (for instance tide_water) would allow the ABM to operate on a more limited number of blocks, and possibly to tune the ABM parameters (chance, interval) better; if one can replace the water/air blocks in one go (*), the water level would only have to change four times per in-game day (which suggests that the interval should take the duration of the day into consideration).<br /><br />for instance if tide_water_node pos &gt; height then change it to tide_air_node, if tide_air_node &lt; height then change it to tide_water_node.<br /><br />Obviously those two special nodes have the same properties as air and water.<br /><br />As for the issue with ponds and lakes, a possible solution could be to replace source_water nodes with river_source_water at mapgen time or with a LBM. The tricky part though, determining a criteria to decide what is a pond or a lake, is still here. I would try water depth, as it seems to me that ponds are often shallow (almost by definition?). <br /><br />(*) I'm not sure changing all block at once is ideal, those, because it could ground fishes, drown other mobs and surprise players. Maybe a more complicated concept that would simulate waves would allow more progressive tides. But then I'm not sure it would render well in the end, and the whole thing is easier said than done.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Astrobe</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 217</dd><dd><strong>Joined:</strong> Sun Apr 01, 2018 10:46 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339422" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339422">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Sun Dec 30, 2018 2:34 pm </p>

			<div class="content"><blockquote><div><cite>FaceDeer wrote:</cite>Taking a quick look at the rest of the mod, I take it the idea here is that depending on the particular time of day you want to destroy the uppermost layers of water in the ocean at certain times of the day and then recreate them again on the other times? There's going to be some tricky edge cases to overcome here no matter how you approach this, but that's part of the fun of making mods. :)<br /></div></blockquote><br /><br />I'm not sure if I understand. Edge cases being... the peaks of the sine wave? I'd like to have it <span style="font-style: italic">working</span> before I worry about the range. It's just one line of code after all.<br /><br /><blockquote><div><cite>FaceDeer wrote:</cite>Using minetest.register_globalstep is the correct approach to modifying the mapblocks that a player is currently in to account for time changing &quot;before his eyes&quot;, IMO.<br /></div></blockquote><br /><br />So... instead of the ABM? I'm not sure how that would work. then again, I'm a noob.<br /><br /><blockquote><div><cite>FaceDeer wrote:</cite> To update blocks that a player enters into that were last left in a state other than the way it should be now (for example, it's low tide and the player has just entered a mapblock that was left in a high-tide state) I recommend using an LBM instead - look up LoadingBlockModifier in the api documentation, you'll want one with run_at_every_load = true and set to execute on water nodes.<br /></div></blockquote><br /><br />Thanks for this advice, it's half-working now! Also, not crazy-slow! <br /><br /><blockquote><div><cite>FaceDeer wrote:</cite>That works well for making the water level go down when tide goes out, but making the water come back *up* again is more challenging. You'll need some way to figure out where water is supposed to be - if you just indiscriminately fill the entire y-coordinate's air layer with water you'll inundate the caves and any holes the player might have dug.<br /></div></blockquote><br />Heh. I can't get it to rise <span style="font-style: italic">at all</span>. <br /><br /><blockquote><div><cite>FaceDeer wrote:</cite>If you like the sound of that idea and nobody has better suggestions I could whip up some example code to show it in more detail.</div></blockquote><br /><br />Some help in getting the tide to go up would be really appreciated. The github repo is currently up to date, although it needs renaming.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339429" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339429">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Sun Dec 30, 2018 3:08 pm </p>

			<div class="content"><blockquote><div><cite>Astrobe wrote:</cite>It seems to me that converting the -1 and -2 layers of water into a specialized blocks (for instance tide_water) would allow the ABM to operate on a more limited number of blocks, and possibly to tune the ABM parameters (chance, interval) better; if one can replace the water/air blocks in one go (*), the water level would only have to change four times per in-game day (which suggests that the interval should take the duration of the day into consideration).<br /><br />for instance if tide_water_node pos &gt; height then change it to tide_air_node, if tide_air_node &lt; height then change it to tide_water_node.<br /><br />Obviously those two special nodes have the same properties as air and water.<br /></div></blockquote><br /><br />Actually, I was just thinking something similar: the tides go down with no problem, so having a special tidal water thing is probably unnecessary. However, if instead of air it was replaced with another gas (one that stinks, because of all the old seaweed, fish etc), then the problem of finding where to put the high-tide water is solved, and it will become simpler to raise the tide as well.<br /><br /><blockquote><div><cite>Astrobe wrote:</cite>As for the issue with ponds and lakes, a possible solution could be to replace source_water nodes with river_source_water at mapgen time or with a LBM. The tricky part though, determining a criteria to decide what is a pond or a lake, is still here. I would try water depth, as it seems to me that ponds are often shallow (almost by definition?). <br /></div></blockquote><br /><br />I hereby declare, untill further notice, any pools of default:water_source to be part of the sea, since that way I don't have to worry about them. <br /><br />side-note: if there is river_water, why isn't there any pond_water? there are, after all more ponds than rivers in minetest.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339445" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339445">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>FaceDeer</strong> &raquo; Sun Dec 30, 2018 7:13 pm </p>

			<div class="content"><blockquote><div><cite>markthesmeagol wrote:</cite>I'm not sure if I understand. Edge cases being... the peaks of the sine wave? I'd like to have it <span style="font-style: italic">working</span> before I worry about the range. It's just one line of code after all.<br /></div></blockquote><br /><br />&quot;Edge case&quot; means a situation where, even though the code works correctly 99.9% of the time, there's this one weird situation where it does something strange. For example if your approach is &quot;destroy all water at y=-1 when the tide goes down and then fill all air at y=-1 with water when the tide goes up&quot; then an edge case would be &quot;what about a 1-node-deep pond? The water would magically appear and disappear completely in a pond like that.&quot; or &quot;what about a cave that passes through the y=-1 level, water shouldn't just poof into existence in there.&quot;<br /><br />Even my suggested approach - look for existing water at the boundaries of map blocks and flood-fill from there - has its own edge cases. You could have a small pond that happens to straddle a map block boundary, and then you'll see tides raising and lowering the water in it. With a game like Minetest it's really hard to eliminate *all* edge cases from situations like this, players build all kinds of weird stuff. Ideally we find solutions where edge cases are minimized and their effects are not obvious.<br /><br /><blockquote><div><cite>markthesmeagol wrote:</cite><blockquote><div><cite>FaceDeer wrote:</cite>Using minetest.register_globalstep is the correct approach to modifying the mapblocks that a player is currently in to account for time changing &quot;before his eyes&quot;, IMO.<br /></div></blockquote><br /><br />So... instead of the ABM? I'm not sure how that would work. then again, I'm a noob.<br /></div></blockquote><br /><br />Yeah. ABMs, LBMs, and globalstep callbacks all have different strengths and weaknesses, so different problems are best solved in different ways. In a nutshell:<br /><br /><ul><li> ABMs are called at regular intervals on every single node (of the specified types) in the active block they're in. When using them with very common node types (like water_source) this results in a <span style="font-style: italic">ton</span> of function calls. ABMs are good for things that need frequent updates that happen before the player's eyes, like fires spreading or lava cooling.</li><li> LBMs are also called on every single node of the specified types in a block, but only at the moment when the block is loaded into memory - usually, that means when the player has approached near enough to see it. LBMs are ideal for making changes that the player would assume had happened while they were away from the region, and for housekeeping operations such as replacing obsolete nodes from an uninstalled or older version of a mod with new replacements.</li><li> globalstep callbacks are only called once per player, though at a high frequency (once per tick of the clock, which in a game is usually a small fraction of a second - most globalstep callbacks will keep track of elapsed time and only do the &quot;meat&quot; of their code at more widely-spaced intervals to reduce the overhead). They're better than ABMs for this particular purpose because you can have it keeping close track of the time (frequent runs) without also running it for every node - it eliminates a ton of redundancy.</li></ul><br />There are some other tricks in the modding toolbox for making the world change over time beyond just these, but they're less relevant to the specific problem here I think. We'll see how those edge cases go. :)<br /><br /><blockquote><div><cite>markthesmeagol wrote:</cite><blockquote><div><cite>FaceDeer wrote:</cite>If you like the sound of that idea and nobody has better suggestions I could whip up some example code to show it in more detail.</div></blockquote><br /><br />Some help in getting the tide to go up would be really appreciated. The github repo is currently up to date, although it needs renaming.</div></blockquote><br /><br />I'll take a look later today and make some specific suggestions. I'm in the middle of final testing to roll out a major release of one of my own mods, though, so don't wait up on me.<br /><br />You've picked an interesting puzzle for your very first mod, but don't be discouraged. I've been modding for years and I'm still encountering weird situations and head-slappers where I realize I've made a bad choice without realizing it. Minetest has some non-obvious gotchas sometimes. :)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>FaceDeer</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 297</dd><dd><strong>Joined:</strong> Sat Aug 29, 2015 7:01 pm</dd>
			<dd><strong>GitHub:</strong> FaceDeer</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339448" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339448">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>FaceDeer</strong> &raquo; Sun Dec 30, 2018 7:34 pm </p>

			<div class="content"><blockquote><div><cite>markthesmeagol wrote:</cite>Actually, I was just thinking something similar: the tides go down with no problem, so having a special tidal water thing is probably unnecessary. However, if instead of air it was replaced with another gas (one that stinks, because of all the old seaweed, fish etc), then the problem of finding where to put the high-tide water is solved, and it will become simpler to raise the tide as well.<br /></div></blockquote><br /><br />A possible solution, but which comes with its own possible problems as well. A player could build a bunch of nodes in a low-tide-exposed area, replacing the airlike tidal water, and then dig those nodes to leave regular air. Or they could build a wall to isolate a patch of exposed land from the ocean, but it's still got those invisible tidal water replacement nodes in it.<br /><br />A placeholder node like this could save a lot of work, though. Worth poking around with. The <a href="https://github.com/thomasrudin-mt/vacuum" class="postlink">vacuum</a> mod comes to mind as a possible related idea you could look at the code for, I stole a few ideas from it when creating <a href="https://github.com/FaceDeer/dfcaverns/blob/modpack-refactor/oil/gas.lua" class="postlink">mine gas</a>.<br /><br /><blockquote><div><cite>markthesmeagol wrote:</cite>side-note: if there is river_water, why isn't there any pond_water? there are, after all more ponds than rivers in minetest.</div></blockquote><br /><br />As I understand it, river_water was created specifically for the &quot;valleys&quot; mapgen. That mapgen creates rivers whose surface rises and falls with elevation changes, resulting in flowing water being generated. But regular flowing water spreads like crazy, so the rivers would end up generating lots of weird flooding. river_water has a smaller liquid_range value, which keeps the flooding more local.<br /><br />Pond water and ocean water wouldn't need different properties, so having two node definitions with the exact same properties would be redundant and complicate things (what happens if the player digs a channel between pond and ocean, for example? How do the two flowing types &quot;mix&quot;? Should there be two different bucket-of-water types?). Also, it's not necessarily obvious to the map generator what's a pond and what's an ocean. Mapgen can only &quot;see&quot; the specific map block that it's currently working on, it can't (reliably) take a peek at the next block over to see if the little bit of water on its edge is connected to a vast ocean or if it's just half of a tiny little puddle.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>FaceDeer</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 297</dd><dd><strong>Joined:</strong> Sat Aug 29, 2015 7:01 pm</dd>
			<dd><strong>GitHub:</strong> FaceDeer</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339453" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339453">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Sun Dec 30, 2018 8:31 pm </p>

			<div class="content"><blockquote><div><cite>FaceDeer wrote:</cite>A placeholder node like this could save a lot of work, though. Worth poking around with. The <a href="https://github.com/thomasrudin-mt/vacuum" class="postlink">vacuum</a> mod comes to mind as a possible related idea you could look at the code for, I stole a few ideas from it when creating <a href="https://github.com/FaceDeer/dfcaverns/blob/modpack-refactor/oil/gas.lua" class="postlink">mine gas</a>.<br /></div></blockquote><br /><br />FaceDeer stealing ideas from me, i feel honored :)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 209</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 5:58 am</dd>
			<dd><strong>GitHub:</strong> thomasrudin-mt</dd>
			<dd><strong>In-game:</strong> BuckarooBanzai</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339460" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339460">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>FaceDeer</strong> &raquo; Sun Dec 30, 2018 8:51 pm </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay wrote:</cite>FaceDeer stealing ideas from me, i feel honored :)</div></blockquote><br /><br />It's what open source is all about, innit? I noticed a few pieces of my &quot;airtanks&quot; mod in vacuum too, and so the wheel turns. :) Oh, if markthesmeagol will excuse the brief off-topic digression, I should mention that in vacuum's register_on_dignode callback you might want to use <span style="color: #000000; background-color: #ffffff; font: 0.9em Monaco, 'Andale Mono','Courier New', Courier, mono; border: 1px solid #d8d8d8;">if minetest.get_item_group&#40;oldnode.name, &quot;digtron&quot;&#41; &gt; 0 then</span> instead of <span style="color: #000000; background-color: #ffffff; font: 0.9em Monaco, 'Andale Mono','Courier New', Courier, mono; border: 1px solid #d8d8d8;">if oldnode.name and string.sub&#40;oldnode.name, 0, 7&#41; == &quot;digtron&quot; then</span>. That way if some other mod comes along that adds new digtron components vacuum will treat them right too. I don't know of any but it's a theoretical possibility.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>FaceDeer</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 297</dd><dd><strong>Joined:</strong> Sat Aug 29, 2015 7:01 pm</dd>
			<dd><strong>GitHub:</strong> FaceDeer</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339688" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339688">Re: [mod-wip] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Wed Jan 02, 2019 10:03 am </p>

			<div class="content"><blockquote><div><cite>FaceDeer wrote:</cite><blockquote><div><cite>markthesmeagol wrote:</cite>[...]<br /></div></blockquote><br /><br />A possible solution, but which comes with its own possible problems as well. A player could build a bunch of nodes in a low-tide-exposed area, replacing the airlike tidal water, and then dig those nodes to leave regular air. Or they could build a wall to isolate a patch of exposed land from the ocean, but it's still got those invisible tidal water replacement nodes in it.<br /><br /></div></blockquote><br />Ouch. Didn't think of those cases. maybe some sort of cellular automaton (in the form of an abm) would sort things out? Or... could I use the liquid_whatever thing to get the gas to spread? Probably an entire new can of worms.<br /><blockquote><div><cite>FaceDeer wrote:</cite>A placeholder node like this could save a lot of work, though. Worth poking around with. The <a href="https://github.com/thomasrudin-mt/vacuum" class="postlink">vacuum</a> mod comes to mind as a possible related idea you could look at the code for, I stole a few ideas from it when creating <a href="https://github.com/FaceDeer/dfcaverns/blob/modpack-refactor/oil/gas.lua" class="postlink">mine gas</a>.<br /></div></blockquote><br />I've looked at the vacuum one, and understand the general idea... sort of. I'l look deeper into it sometime.<br /><blockquote><div><cite>FaceDeer wrote:</cite><blockquote><div><cite>markthesmeagol wrote:</cite>side-note: if there is river_water, why isn't there any pond_water? there are, after all more ponds than rivers in minetest.</div></blockquote><br /><br />As I understand it, river_water was created specifically for the &quot;valleys&quot; mapgen. [...]</div></blockquote><br /><br />I guess that makes sense... but:<br /><blockquote><div><cite>markthesmeagol wrote:</cite>I hereby declare, untill further notice, any pools of default:water_source to be part of the sea, since that way I don't have to worry about them. <br />.</div></blockquote><br />Since the mapgen doesn't care if it's a pond or not, why should I (other than common sense)?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p339689" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p339689">Re: [mod] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>markthesmeagol</strong> &raquo; Wed Jan 02, 2019 10:27 am </p>

			<div class="content">Also, I forgot to announce this:<br /><br /><span style="font-size: 200%; line-height: 116%;"><span style="color: #000080">Tides 0.0.</span><span style="color: #00BF00">3</span> is now useable and announced</span><br /><br />Since it isn't in mods-releases, I guess it doesn't count as a release, and I don't think it should be moved there yet, even though it is sort-of ready.<br /><br /><span style="font-size: 200%; line-height: 116%;"><span style="color: #0000FF">NEW FEATURES</span></span><br /><ul><li>It actually works! tides go out <span style="font-weight: bold">and come back in</span> <span style="font-size: 50%; line-height: 116%;">when you're not looking</span></li><li>If anyone wants to, there is now a way to add new areas (that weren't originally under water) to the tidal zone <span style="font-size: 85%; line-height: 116%;">(just put tides:stink_air there (why the stink? because of the fish.))</span></li><li><span style="text-decoration: line-through;">most</span> all buildings/structures are safe. The water will not <span style="text-decoration: line-through;">currently</span> rise above the water level at mapgen.</li><li>those annoying fountains that people keep putting in your nice, calm neighbourhood? Gone (unless they managed to get hold of river water, but who does that?).</li></ul><br /><span style="font-size: 200%; line-height: 116%;"><span style="color: #BFBF00">TO DO</span></span><br /><br /><ul><li>make it configurable (tide pattern)</li><li>add a way for other mods to add their own tides</li><li>make sure that the tide is synced to the moon</li><li>add a command to check on the tide</li><li>find a way to let the tides go above the mapgen level</li><li>avoid removing fountains/pools/stuff above sea level.</li><li>allow the player to see the tides coming in.</li><li><span style="text-decoration: line-through;">stop flooding peoples stuff</span> (naah. Their fault. <span style="font-style: italic">the foolish man builds his house upon the sand</span>)</li><li>make stinky air stink.</li></ul><span style="font-size: 200%; line-height: 116%;"><span style="color: #0040BF">To maybe do</span></span><br /><br /><ul><li>get boats to go out in the tide, and come back in with it.</li><li>wreck some boats</li><li>add some erosion</li></ul></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>markthesmeagol</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Fri Dec 21, 2018 1:15 pm</dd>
			<dd><strong>GitHub:</strong> smeagolthellama</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p340807" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p340807">Re: [mod] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Sokomine</strong> &raquo; Sun Jan 13, 2019 6:19 pm </p>

			<div class="content">Very intresting concept. How well does it perform now? And: Dirt falling dry because of the water moving away ought to turn into a special form of dirt. Maybe it would be sufficient to calculate and replace those nodes once. Still, that would make it even more complicated.<br /><br />What about ships? They'd have to sink as well. While houses don't. So...there are many of these annoying edge cases. But the idea as such is great! Just...probably beyound what MT physics can do.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Sokomine</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3750</dd><dd><strong>Joined:</strong> Sun Sep 09, 2012 5:31 pm</dd>
			<dd><strong>GitHub:</strong> Sokomine</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347155" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/9_21600.htm#p347155">Re: [mod] tides [tides]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Brian Gaucher</strong> &raquo; Mon Mar 25, 2019 8:08 pm </p>

			<div class="content">You should submit this mod to the modding competition: <a href="https://forum.minetest.net/viewtopic.php?f=47&amp;t=22360&amp;p=347153#p347153" class="postlink">https://forum.minetest.net/viewtopic.php?f=47&amp;t=22360&amp;p=347153#p347153</a></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Brian Gaucher</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 58</dd><dd><strong>Joined:</strong> Wed Jan 10, 2018 1:56 am</dd>
			<dd><strong>GitHub:</strong> BrianGaucher</dd>
			<dd><strong>In-game:</strong> Camasia</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			24 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=9" class="left-box left" accesskey="r">Return to WIP Mods</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
