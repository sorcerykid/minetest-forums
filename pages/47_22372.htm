
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm

  The following page was cached by Bing Bot (https://bing.com/) on 20-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - How to check that a player is in liquid?</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - How to check that a player is in liquid?" href="https://forum.minetest.net/feed.php?f=47&amp;t=22372" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=47">Modding Discussion</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=22372">How to check that a player is in liquid?</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			7 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p346624" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p346624">How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TillCoyote</strong> &raquo; Wed Mar 20, 2019 6:32 am </p>

			<div class="content">I want to deny sprinting in water because of variable running speed. How to do so in maximally light way?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TillCoyote</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 43</dd><dd><strong>Joined:</strong> Sat Jan 26, 2019 8:05 am</dd>
			
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347289" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347289">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>disconnected</strong> &raquo; Wed Mar 27, 2019 2:18 am </p>

			<div class="content">Perhaps with an ABM? Every second get players within a radius of 1. Store player in mod storage for 1 second then remove &amp; replace every second while they are in liquid. Check mod storage for player entry when sprinting.<br /><br />Not sure if this is the most efficient method but ABMs only fire when the player is near the block  AFAIK.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>disconnected</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Mon Mar 11, 2019 3:45 am</dd>
			<dd><strong>GitHub:</strong> discon-nected</dd>
			<dd><strong>In-game:</strong> disconnected</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347304" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347304">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TenPlus1</strong> &raquo; Wed Mar 27, 2019 6:25 am </p>

			<div class="content">You could check out my PlayerPlus mod which adds new player effects and has a global table for checking what the player is standing on, standing in and at head level:<br /><br /><!-- m --><a class="postlink" href="https://notabug.org/tenplus1/playerplus">https://notabug.org/tenplus1/playerplus</a><!-- m --></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TenPlus1</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2534</dd><dd><strong>Joined:</strong> Mon Jul 29, 2013 1:38 pm</dd>
			<dd><strong>GitHub:</strong> tenplus1</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347306" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347306">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>disconnected</strong> &raquo; Wed Mar 27, 2019 6:31 am </p>

			<div class="content"><blockquote><div><cite>TenPlus1 wrote:</cite>You could check out my PlayerPlus mod</div></blockquote><br />But your mod scans nodes around every player every second.<br />Which method do you think would be the most efficient?<br />I suppose it depends on where the players are most likely to be. If in or near water often, your mod would be and vice versa.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>disconnected</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 16</dd><dd><strong>Joined:</strong> Mon Mar 11, 2019 3:45 am</dd>
			<dd><strong>GitHub:</strong> discon-nected</dd>
			<dd><strong>In-game:</strong> disconnected</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347320" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347320">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TenPlus1</strong> &raquo; Wed Mar 27, 2019 12:38 pm </p>

			<div class="content">The only real way to see if a player is standing in water is to get the nodes they are standing on/in, and with playerplus each second is more than enough, doesnt lag, introduces many more features to the player and has a global table that can be accessed by many other mods so they dont need to get the nodes a 2nd time :)  <br /><br />I use it on Xanadu server if you wanna peek :P</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TenPlus1</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2534</dd><dd><strong>Joined:</strong> Mon Jul 29, 2013 1:38 pm</dd>
			<dd><strong>GitHub:</strong> tenplus1</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347539" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347539">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sorcerykid</strong> &raquo; Sat Mar 30, 2019 3:07 am </p>

			<div class="content">It's too bad such functionality isn't provided directly by the Minetest API, since the engine already tracks the surrounding nodes of all physical objects at every server step.<br /><br />Of even better yet, I wish Minetest supported a full-fledged event propagation system like the one invented by Looking Glass Studios for The Dark Engine. Then water source nodes could send a stimulus event to all objects that are immersed within the nodebox. Something like this would be cool :)<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>minetest.override_node( &quot;default:water_source&quot;, {<br />&nbsp; &nbsp; &nbsp;sources = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stimulus = &quot;water_stim&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;propagator = &quot;flow&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;intensity = 1.0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;interval = 0.5,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp;}<br />}<br /><br />minetest.register_stimulus( &quot;water_stim&quot;, {<br />&nbsp; &nbsp; &nbsp;on_flow = function ( pos, object, intensity )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if object:is_player( ) then<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print( &quot;Player is standing in water!&quot; )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />&nbsp; &nbsp; &nbsp;end<br />} )<br /></code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>sorcerykid</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1026</dd><dd><strong>Joined:</strong> Fri Aug 26, 2016 3:36 pm</dd>
			<dd><strong>GitHub:</strong> sorcerykid</dd>
			<dd><strong>In-game:</strong> Nemo</dd>
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p347546" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/47_22372.htm#p347546">Re: How to check that a player is in liquid?</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>TenPlus1</strong> &raquo; Sat Mar 30, 2019 6:32 am </p>

			<div class="content">sorcerykid: I asked for such a think in github, since nodes around player are used to check collision then why not store inside a table for modders to access already.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>TenPlus1</strong>
			</dt>
			<dd>Member</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2534</dd><dd><strong>Joined:</strong> Mon Jul 29, 2013 1:38 pm</dd>
			<dd><strong>GitHub:</strong> tenplus1</dd>
			
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			7 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=47" class="left-box left" accesskey="r">Return to Modding Discussion</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
