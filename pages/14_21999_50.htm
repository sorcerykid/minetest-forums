
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/14_21999_50.htm

  The following page was cached by Yandex Bot (https://yandex.com/) on 28-Apr-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - Minetest mapserver [2.0.1]</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Minetest mapserver [2.0.1]" href="https://forum.minetest.net/feed.php?f=14&amp;t=21999" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=14">Minetest-related projects</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=21999">Minetest mapserver [2.0.1]</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			63 posts
			 &bull; Page <strong>3</strong> of <strong>3</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p348802" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p348802">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>DoyleChris</strong> &raquo; Sat Apr 13, 2019 19:05 </p>

			<div class="content">I tried the new version but im getting a error now.<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>INFO&#91;0000&#93; Starting mapserver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; version=git-70ab8ee90a6513d3e0268548515755ef14fb60da<br />INFO&#91;0000&#93; Loading default colors&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename=/colors.txt prefix=colormapping size=704248 useLocal=false<br />INFO&#91;0000&#93; Loaded default colors&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;count=16108<br />INFO&#91;0000&#93; Migrating database&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename=mapserver.sqlite prefix=mapobjectdb.sqlite<br />INFO&#91;0000&#93; Migration completed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elapsed=26.725155ms prefix=mapobjectdb.sqlite<br />INFO&#91;0000&#93; Starting http server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; port=8080 webdev=false<br />INFO&#91;0000&#93; Starting initial rendering job<br />INFO&#91;0059&#93; Initial rendering&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elapsed=58.808028857s mapblocks=5355 progress%=11 tiles=283<br />runtime/cgo: pthread_create failed: Resource temporarily unavailable<br />SIGABRT: abort<br />PC=0x55db06 m=2 sigcode=4294967290<br /><br />goroutine 0 &#91;idle&#93;:<br />runtime: unknown pc 0x55db06<br />stack: frame={sp:0x66d5b7e8, fp:0x0} stack=&#91;0x6655c0bc,0x66d5bcbc)<br />66d5b768:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b778:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b788:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b798:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7a8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7b8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7c8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7d8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7e8: &lt;00b2cb94&nbsp; 00560dff&nbsp; 00000000&nbsp; 00000000<br />66d5b7f8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b808:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b818:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b828:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b838:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b848:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b858:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000020&nbsp; 00560e59<br />runtime: unknown pc 0x55db06<br />stack: frame={sp:0x66d5b7e8, fp:0x0} stack=&#91;0x6655c0bc,0x66d5bcbc)<br />66d5b768:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b778:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b788:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b798:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7a8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7b8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 0</code></dd></dl></div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>DoyleChris</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 227</dd><dd><strong>Joined:</strong> Sat Jul 25, 2015 19:54</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p348883" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p348883">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Sun Apr 14, 2019 19:43 </p>

			<div class="content"><blockquote><div><cite>DoyleChris wrote:</cite>I tried the new version but im getting a error now.<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>INFO&#91;0000&#93; Starting mapserver&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; version=git-70ab8ee90a6513d3e0268548515755ef14fb60da<br />INFO&#91;0000&#93; Loading default colors&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename=/colors.txt prefix=colormapping size=704248 useLocal=false<br />INFO&#91;0000&#93; Loaded default colors&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;count=16108<br />INFO&#91;0000&#93; Migrating database&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename=mapserver.sqlite prefix=mapobjectdb.sqlite<br />INFO&#91;0000&#93; Migration completed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elapsed=26.725155ms prefix=mapobjectdb.sqlite<br />INFO&#91;0000&#93; Starting http server&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; port=8080 webdev=false<br />INFO&#91;0000&#93; Starting initial rendering job<br />INFO&#91;0059&#93; Initial rendering&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;elapsed=58.808028857s mapblocks=5355 progress%=11 tiles=283<br />runtime/cgo: pthread_create failed: Resource temporarily unavailable<br />SIGABRT: abort<br />PC=0x55db06 m=2 sigcode=4294967290<br /><br />goroutine 0 &#91;idle&#93;:<br />runtime: unknown pc 0x55db06<br />stack: frame={sp:0x66d5b7e8, fp:0x0} stack=&#91;0x6655c0bc,0x66d5bcbc)<br />66d5b768:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b778:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b788:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b798:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7a8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7b8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7c8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7d8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7e8: &lt;00b2cb94&nbsp; 00560dff&nbsp; 00000000&nbsp; 00000000<br />66d5b7f8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b808:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b818:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b828:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b838:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b848:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b858:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000020&nbsp; 00560e59<br />runtime: unknown pc 0x55db06<br />stack: frame={sp:0x66d5b7e8, fp:0x0} stack=&#91;0x6655c0bc,0x66d5bcbc)<br />66d5b768:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b778:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b788:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b798:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7a8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000<br />66d5b7b8:&nbsp; 00000000&nbsp; 00000000&nbsp; 00000000&nbsp; 0</code></dd></dl></div></blockquote><br /><br />Uhm, thats a new one... :)<br /><br />Can you try lowering the <span style="font-weight: bold">renderingjobs</span> setting in the <span style="font-weight: bold">mapserver.json</span> ?<br />It should default to the number of cores, but in the raspberry pi case i would set it to <span style="font-weight: bold">1</span> and wait a bit longer.<br />The underlaying problem is probably a resource exhaustion of the system though...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 226</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 05:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349009" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349009">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Walker</strong> &raquo; Tue Apr 16, 2019 16:32 </p>

			<div class="content">has someone portet the mapserver for MineClone2 ?<br /><br />or have created a color.txt for it ?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Walker</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 122</dd><dd><strong>Joined:</strong> Tue Oct 03, 2017 09:22</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349066" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349066">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Wed Apr 17, 2019 15:32 </p>

			<div class="content"><blockquote><div><cite>Walker wrote:</cite>has someone portet the mapserver for MineClone2 ?<br /><br />or have created a color.txt for it ?</div></blockquote><br /><br />You can add your own colors.txt if you create one: <!-- m --><a class="postlink" href="https://github.com/thomasrudin-mt/mapserver/blob/master/doc/config.md#colors">https://github.com/thomasrudin-mt/mapse ... .md#colors</a><!-- m --><br /><br />If you do that though, can you send me that file so i can include it in the base colors.txt?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 226</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 05:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349480" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349480">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Rafi59</strong> &raquo; Tue Apr 23, 2019 09:08 </p>

			<div class="content">I'm trying to set up the mapserver on a test server. Everything works great but it use a lot of RAM. I have allocated 2 Gb of RAM in the VM and it uses after some hours 1,5Gb of RAM. I'm using the latest 2.0.1 version.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Rafi59</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 8</dd><dd><strong>Joined:</strong> Tue May 22, 2018 10:31</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349542" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349542">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Festus1965</strong> &raquo; Tue Apr 23, 2019 11:02 </p>

			<div class="content">example / similar from here: sum 31.4 GB<br />- minetest itself 7.2 % - 2.26 GB (but there was no real visit since yesterday restart)<br />- mapserver 3.5 % - 1.13 %<br />depending on what is build in = no problem, the more in RAM, the faster can deliver.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Festus1965</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 975</dd><dd><strong>Joined:</strong> Sun Jan 03, 2016 11:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349558" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349558">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Tue Apr 23, 2019 15:07 </p>

			<div class="content"><blockquote><div><cite>Rafi59 wrote:</cite>I'm trying to set up the mapserver on a test server. Everything works great but it use a lot of RAM. I have allocated 2 Gb of RAM in the VM and it uses after some hours 1,5Gb of RAM. I'm using the latest 2.0.1 version.</div></blockquote><br /><br />You can tune that somewhat with the <span style="font-weight: bold">maxitems</span> setting.<br />It tells how many mapblocks are held in ram:<br /><br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>{<br />&nbsp; &nbsp;&quot;mapblockaccessor&quot;: {<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;expiretime&quot;: &quot;15s&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;purgetime&quot;: &quot;30s&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp;&quot;maxitems&quot;: 5000<br />&nbsp; &nbsp;}<br />}<br /></code></dd></dl><br /><br />Default is 5000, but you can set that even to 0 (this will increase rendering time though)</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 226</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 05:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349595" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349595">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Festus1965</strong> &raquo; Tue Apr 23, 2019 21:58 </p>

			<div class="content">please explain &quot;expiretime&quot; - ? re-render as might got some change - or out of mem reread ?<br />&quot;purgetime&quot; ?<br />I set to 10000, sure I can go much higher, will test and post results about cpu using, also mem</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Festus1965</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 975</dd><dd><strong>Joined:</strong> Sun Jan 03, 2016 11:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349676" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349676">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Wed Apr 24, 2019 18:00 </p>

			<div class="content"><blockquote><div><cite>Festus1965 wrote:</cite>please explain &quot;expiretime&quot; - ? re-render as might got some change - or out of mem reread ?<br />&quot;purgetime&quot; ?<br />I set to 10000, sure I can go much higher, will test and post results about cpu using, also mem</div></blockquote><br /><br /><span style="font-weight: bold">expiretime</span> is the time mapblocks are held in memory after queried from the database.<br />Too much queries of the database would result in slight performance decrease on the database and cause some lag on the minetest server.<br /><br />A few hundred (200-500) would be a safe setting in my opinion...</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 226</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 05:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349702" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349702">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Festus1965</strong> &raquo; Wed Apr 24, 2019 23:27 </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay wrote:</cite><span style="font-weight: bold">expiretime</span> is the time mapblocks are held in memory after queried from the database.<br />Too much queries of the database would result in slight performance decrease on the database and cause some lag on the minetest server.</div></blockquote><br />I changed before to<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>{&nbsp; &nbsp;&quot;mapblockaccessor&quot;: {<br />&nbsp; &nbsp; &nbsp; &quot;expiretime&quot;: &quot;15s&quot;,<br />&nbsp; &nbsp; &nbsp; &quot;purgetime&quot;: &quot;30s&quot;,<br />&nbsp; &nbsp; &nbsp; &quot;maxitems&quot;: 10000&nbsp; &nbsp; } }</code></dd></dl>nothing more used after more than 24 hours, now I am on<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>{&nbsp; &nbsp;&quot;mapblockaccessor&quot;: {<br />&nbsp; &nbsp; &nbsp; &quot;expiretime&quot;: &quot;60s&quot;,<br />&nbsp; &nbsp; &nbsp; &quot;purgetime&quot;: &quot;300s&quot;,<br />&nbsp; &nbsp; &nbsp; &quot;maxitems&quot;: 10000&nbsp; &nbsp; } }</code></dd></dl><br /><br />add: - nearly same yet, with other settings<br /><blockquote><div><cite>Festus1965 wrote:</cite>example / similar from here: sum 31.4 GB<br />- minetest itself 7.2 % - 2.26 GB<br />- mapserver 3.5 % - 1.13 GB</div></blockquote> new:<br />- mts 9.1 % / 2.85 GB<br />- mapserver 3.4 % / 1.07 GB<br />but: ubuntu cache (keep writing files also in RAM) near another 60% as before, from usage settings in systemctl.conf before</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Festus1965</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 975</dd><dd><strong>Joined:</strong> Sun Jan 03, 2016 11:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p349966" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p349966">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Festus1965</strong> &raquo; Sat Apr 27, 2019 23:17 </p>

			<div class="content"><blockquote class="uncited"><div>{   &quot;mapblockaccessor&quot;: {<br />      &quot;expiretime&quot;: &quot;60s&quot;,<br />      &quot;purgetime&quot;: &quot;300s&quot;,<br />      &quot;maxitems&quot;: 10000    } }</div></blockquote>now,after have rushed around the map a lot, to activate old areas for mapping:<br />31.3 GB, used 22.1 GB with<br />(* system about 1.2 GB ... and others)<br />* mts 56.5 % / 17.8 GB RAM<br />* mapserver 6.2 % / 1.95 GB<br />* postgresql 3.4 % / 1.06 GB</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Festus1965</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 975</dd><dd><strong>Joined:</strong> Sun Jan 03, 2016 11:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p350006" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class=""><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p350006">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>BuckarooBanzay</strong> &raquo; Sun Apr 28, 2019 09:44 </p>

			<div class="content"><blockquote><div><cite>Festus1965 wrote:</cite><blockquote class="uncited"><div>{   &quot;mapblockaccessor&quot;: {<br />      &quot;expiretime&quot;: &quot;60s&quot;,<br />      &quot;purgetime&quot;: &quot;300s&quot;,<br />      &quot;maxitems&quot;: 10000    } }</div></blockquote>now,after have rushed around the map a lot, to activate old areas for mapping:<br />31.3 GB, used 22.1 GB with<br />(* system about 1.2 GB ... and others)<br />* mts 56.5 % / 17.8 GB RAM<br />* mapserver 6.2 % / 1.95 GB<br />* postgresql 3.4 % / 1.06 GB</div></blockquote><br /><br />Hey Festus<br /><br />I think in your initial map generation were a lot of errors in mapblocks, that maybe the reason a lot of areas are &quot;unmapped&quot;:<br />The mapper does the initial rendering in chunks (16x16 mapblocks or something) if any of the mapblocks has an error it skips the whole chunk...<br /><br />In the incremental phase (the one you are in now) only the failing mapblocks aren't drawn not the whole chunk, so there should still be a few specs on the map that are white or greyish...<br /><br />Is there any chance you can give me error messages and/or the failing mapblocks...?</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>BuckarooBanzay</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 226</dd><dd><strong>Joined:</strong> Tue Apr 24, 2018 05:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p350014" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/14_21999_50.htm#p350014">Re: Minetest mapserver [2.0.1]</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Festus1965</strong> &raquo; Sun Apr 28, 2019 10:38 </p>

			<div class="content"><blockquote><div><cite>BuckarooBanzay</nobr> wrote:</cite>Is there any chance you can give me error messages and/or the failing mapblocks...?</div></blockquote> sure I found out is an old &quot;chandelier&quot; (Kronleuchter) - as soon I delete this &quot;unknown block&quot;, it works, also &quot;fire&quot; out of old Wildes Land - I can live with it yet ... no hurry.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>Festus1965</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 975</dd><dd><strong>Joined:</strong> Sun Jan 03, 2016 11:58</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			63 posts
			 &bull; Page <strong>3</strong> of <strong>3</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=14" class="left-box left" accesskey="r">Return to Minetest-related projects</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Yandex Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
