
<!--
  Mintest Forum Recovery Project (by sorcerykid)

  https://sorcerykid.github.io/minetest-forums/pages/47_22365.htm

  The following page was cached by Yandex Bot (https://yandex.com/) on 20-Mar-2019.
  All archived content is subject to copyright. No warranty or guaranty is implied.
-->
<base href="https://forum.minetest.net/" />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Minetest Forums &bull; View topic - 3D animation export help</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Minetest Forums" href="https://forum.minetest.net/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="https://forum.minetest.net/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Mods" href="https://forum.minetest.net/feed.php?f=46" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - 3D animation export help" href="https://forum.minetest.net/feed.php?f=47&amp;t=22365" />

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=5&amp;lang=en" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />

</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>Minetest Forums</h1>
				<p>The official Minetest discussion board</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php" accesskey="h">Board index</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=47">Modding Discussion</a></li>
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=46&amp;t=22365">3D animation export help</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->

<div class="topic-actions">
		<div class="pagination">
			1 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>
<div class="clear"></div>

	<div id="p346529" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			<h3 class="first"><a href="https://sorcerykid.github.io/minetest-forums/pages/pages/47_22365.htm#p346529">3D animation export help</a></h3>
			<p class="author"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>JTE</strong> &raquo; Tue Mar 19, 2019 01:40 </p>

			<div class="content">I'm working on a Game which involves a reasonably high detail player model (around 2,500 tris) which requires skeletal animation because I want to attach things to several bones which exist solely as attachment points (eg. a temporary hat attaches to the &quot;hat bone&quot;, which is attached to the head bone where the head mesh is attached)<br /><br />The attachments are simple .obj files for maximum compatibility and work correctly. The player model does not, however.<br /><br />To begin with I had reasonable luck with exports to DirectX format (Default coordinate system: Left-handed), except that the model is rotated to face backwards in-game (towards the camera instead of away). But then when I went to attach things, I found that the attached models are treating the skeleton as though it were completely upside-down. So my hat is bobbing down and up about two blocks below the floor, while the player's head bobs up and down an equal distance above it. The file size comes out to around 6 MB, which is pretty steep, but I haven't had much luck reducing it.<br /><br />Did a lot of optimizations trying to see if I could fix the model, rotating the armature itself around, etc. but nothing really worked. Changed the coordinate system to &quot;Right-handed&quot;, suddenly everything appears to work correctly... <span style="font-style: italic">except</span> the entire model is now horizontally flipped, animations and all. @@; Trying to un-flip it with negative scale resulted in all the normals getting flipped as well and the attachment bones going backwards in-game, so that won't work... ugh.<br /><br />I tried other model formats too. The B3D exporter at <!-- m --><a class="postlink" href="https://github.com/minetest/B3DExport/">https://github.com/<a class="postlink" href="https://github.com/minetest/B3DExport/">minetest/B3DExport/</a><!-- m --> produces a 20 MB large file somehow, which can't even load because the engine crashes if a server attempts to send any file larger than around 16 MB. I tried old Blender version 7.3 (the current version from when the B3DExport plug-in was made) but saw no functional difference.<br /><br />I looked up Irrlicht's documentation (since Minetest's own documentation says &quot;for supported file formats, go see Irrlicht&quot;) and found out there is a third skeletal animation format supported nowadays, from MilkShape3D. Unfortunately Minetest currently doesn't recognise .ms3d files as valid resources, so it doesn't send them to clients. (regardless of whether or not clients would have a recent enough Irrlicht version to render them) If Minetest</nobr> did support ms3d models though, this one would only be 684 KB large apparently. That can't be right, can it..?<br /><br />I seem to have exhausted everything I could try. :( Got any tips?<br /><br /><span style="font-weight: bold">Edit:</span> nevermind... it figures just after I finally give up and decide to post where I'm at, I'd manage to correctly optimize the b3d file down to 7 MB and it works now. Still larger than an .x file, but at least it's consistent with the rest of the engine now.<br /><br />I'm guessing that the &quot;Left-handed&quot; DirectX model was correct, considering the B3D model has to be rotated the same way, so the attachment point being flipped below the floor must be a bug? Throw that on top of the bug with attachments being invisible if attached while in third-person mode (already fixed in a pull request) and attachments to the player sometimes (randomly) deciding to attach to the server's representation of your player model rather than the client-side prediction of the player model... Messy business.</div>
		</div>

			<dl class="postprofile">
			<dt>
				<strong>JTE</strong>
			</dt>
			<dd></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 14</dd><dd><strong>Joined:</strong> Sun Sep 07, 2014 14:59</dd>
		<!--	<dd><strong>GitHub:</strong> %MEMBER_GITHUB_HANDLE%</dd>
			<dd><strong>IRC:</strong> %MEMBER_IRC_HANDLE%</dd> -->
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<hr class="divider" />

	<hr />

<div class="topic-actions">
		<div class="pagination">
			1 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
</div>

	<p></p><p><a href="./viewforum.php?f=47" class="left-box left" accesskey="r">Return to Modding Discussion</a></p>

	<br /><br />

	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Yandex Bot [Bot]</span> and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

</body>
</html></div>
